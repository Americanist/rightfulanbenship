#By JellyCow!! Needs to be edited if Tarakar gets missions
maskedbutcher_missions_1 = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			tag = H81
			AND = {
				was_tag = H81
				NOT = { tag = Z57 }
			}
		}
	}

	H81_maskedbutcher_all_the_world = {
		icon = mission_burning_man
		required_missions = {

		}
		position = 2

		provinces_to_highlight = {
			AND = {
				OR = {
					area = orlghelovar_area
					area = south_altar_area
					area = north_altar_area
					area = argrod_origin_area
					province_id = 4093
					province_id = 2942
					province_id = 2943
				}
				is_empty = no
				NOT = {
					owned_by = ROOT
				}
			}
		}

		trigger = {
			has_institution = feudalism
			custom_trigger_tooltip = {
				tooltip = mb_world_serpentreach_tt
				AND = {
					orlghelovar_area = {
						OR = {
							is_empty = yes
							owns_or_non_sovereign_subject_of = ROOT
						}
					}
					south_altar_area = {
						OR = {
							is_empty = yes
							owns_or_non_sovereign_subject_of = ROOT
						}
					}
					north_altar_area = {
						OR = {
							is_empty = yes
							owns_or_non_sovereign_subject_of = ROOT
						}
					}
					argrod_origin_area = {
						OR = {
							is_empty = yes
							owns_or_non_sovereign_subject_of = ROOT
						}
					}
					4093 = {
						OR = {
							is_empty = yes
							owns_or_non_sovereign_subject_of = ROOT
						}
					}
					2942 = {
						OR = {
							is_empty = yes
							owns_or_non_sovereign_subject_of = ROOT
						}
					}
					2943 = {
						OR = {
							is_empty = yes
							owns_or_non_sovereign_subject_of = ROOT
						}
					}
				}
			}
			employed_advisor = {
				skill = 2
			}
		}

		effect = {
			serpentreach_region = {
				discover_country = ROOT
			}
			custom_tooltip = mb_all_the_world_tt
			set_country_flag = mb_all_the_world_reward_flg
		}
	}
}

maskedbutcher_missions_2 = {
	slot = 2
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			tag = H81
			AND = {
				was_tag = H81
				NOT = { tag = Z57 }
			}
		}
	}

	H81_maskedbutcher_cauldron = {
		icon = mission_burning_man
		required_missions = {
			H81_maskedbutcher_and_ye_shall_find
			H81_maskedbutcher_all_the_world
		}
		position = 3

		trigger = {
			OR = {
				reform_level = 5
				NOT = {
					government = tribal
				}
			}
		}

		effect = {
			change_government = theocracy
			add_government_reform = abyssal_otardom_reform
		}
	}

}

maskedbutcher_missions_3 = {
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			tag = H81
			AND = {
				was_tag = H81
				NOT = { tag = Z57 }
			}
		}
	}

	H81_maskedbutcher_seek = {
		icon = mission_burning_man
		required_missions = {

		}
		position = 1

		provinces_to_highlight = {
			AND = {
				OR = {
					area = orlghelovar_area
					area = south_altar_area
					area = north_altar_area
					area = argrod_origin_area
					province_id = 4093
					province_id = 2942
					province_id = 2943
				}
				has_province_modifier = expedition_target
			}
		}

		trigger = {
			OR = {
				check_variable = {
					expeditions_completed_var = 2
				}
				custom_trigger_tooltip = {
					tooltip = mb_empty_serpentreach_tt
					NOT = {
						OR = {
							orlghelovar_area = {
								has_province_modifier = expedition_target
							}
							south_altar_area = {
								has_province_modifier = expedition_target
							}
							north_altar_area = {
								has_province_modifier = expedition_target
							}
							argrod_origin_area = {
								has_province_modifier = expedition_target
							}
							4093 = {
								has_province_modifier = expedition_target
							}
							2942 = {
								has_province_modifier = expedition_target
							}
							2943 = {
								has_province_modifier = expedition_target
							}
						}
					}
				}
			}
			OR = {
				reform_level = 2
				NOT = {
					government = tribal
				}
			}
		}

		effect = {
			4033 = {
				set_province_flag = mb_vampire_expedition_flag
				spawn_expedition = yes
			}
		}
	}

	H81_maskedbutcher_and_ye_shall_find = {
		icon = mission_burning_man
		required_missions = {
			H81_maskedbutcher_seek
		}
		position = 2

		provinces_to_highlight = {
			AND = {
				province_id = 4033
				4033 = {
					has_province_modifier = expedition_target
				}
			}
		}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = mb_expeditiondone_tt
				has_country_flag = mb_expedition_done_flag
			}
			stability = 1
			OR = {
				prestige = 60
				power_projection = 30
			}
		}

		effect = {
			country_event = {
				id = flavour_maskedbutcher.3
			}
		}
	}

	H81_maskedbutcher_crucible = {
		icon = mission_burning_man
		required_missions = {
			H81_maskedbutcher_and_ye_shall_find
		}
		position = 3

		provinces_to_highlight = {
			AND = {
				province_id = 4033
				4033 = {
					NOT = {
						owned_by = ROOT
					}
				}
			}
		}

		trigger = {
			OR = {
				capital = 2942
				capital = 4093
				capital = 4238
			}
			4033 = {
				owned_by = ROOT
			}
			OR = {
				check_variable = {
					expeditions_completed_var = 5
				}
				custom_trigger_tooltip = {
					tooltip = mb_empty_serpentreach_skomdihr_tt
					NOT = {
						OR = {
							orlghelovar_area = {
								has_province_modifier = expedition_target
							}
							south_altar_area = {
								has_province_modifier = expedition_target
							}
							north_altar_area = {
								has_province_modifier = expedition_target
							}
							argrod_origin_area = {
								has_province_modifier = expedition_target
							}
							shazstundihr_area = {
								has_province_modifier = expedition_target
							}
							arg_ordstun_area = {
								has_province_modifier = expedition_target
							}
							kings_caverns_area = {
								has_province_modifier = expedition_target
							}
							2961 = {
								has_province_modifier = expedition_target
							}
							4127 = {
								has_province_modifier = expedition_target
							}
							2946 = {
								has_province_modifier = expedition_target
							}
							2962 = {
								has_province_modifier = expedition_target
							}
						}
					}
				}
			}
		}

		effect = {
			if = {
				limit = {
					has_estate = estate_vampires
				}
				custom_tooltip = mb_moonlight2_tt
			}
			else = {
				custom_tooltip = mb_moonlight_tt
			}
			4033 = {
				set_province_flag = mb_moonlight_province_flg
			}
			hidden_effect = {
				country_event = {
					id = flavour_maskedbutcher.101
				}
			}
		}
	}

	H81_maskedbutcher_dark_below = {
		icon = mission_burning_man
		required_missions = {
			H81_maskedbutcher_cauldron
			H81_maskedbutcher_crucible
		}
		position = 4

		provinces_to_highlight = {

		}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = mb_dark_serpentreach_tt
				AND = {
					orlghelovar_area = {
						owns_or_non_sovereign_subject_of = ROOT
					}
					south_altar_area = {
						owns_or_non_sovereign_subject_of = ROOT
					}
					north_altar_area = {
						owns_or_non_sovereign_subject_of = ROOT
					}
					argrod_origin_area = {
						owns_or_non_sovereign_subject_of = ROOT
					}
					4093 = {
						owns_or_non_sovereign_subject_of = ROOT
					}
					2942 = {
						owns_or_non_sovereign_subject_of = ROOT
					}
					2943 = {
						owns_or_non_sovereign_subject_of = ROOT
					}
				}
			}
			OR = {
				capital = 2942
				capital = 4093
				capital = 4238
			}
			if = {
				limit = {
					capital = 2942
				}
				AND = {
					owns_core_province = 4093
					4093 = { 
						has_province_modifier = blorc_plunder_camp
						has_fort_building_trigger = yes
					}
					owns_core_province = 4238
					4238 = { 
						has_province_modifier = blorc_plunder_camp
						has_fort_building_trigger = yes
					}
				}
			}
			else_if = {
				limit = {
					capital = 4093
				}
				AND = {
					owns_core_province = 2942
					2942 = { 
						has_province_modifier = blorc_plunder_camp
						has_fort_building_trigger = yes
					}
					owns_core_province = 4238
					4238 = { 
						has_province_modifier = blorc_plunder_camp
						has_fort_building_trigger = yes
					}
				}
			}
			else_if = {
				limit = {
					capital = 4238
				}
				AND = {
					owns_core_province = 2942
					2942 = { 
						has_province_modifier = blorc_plunder_camp
						has_fort_building_trigger = yes
					}
					owns_core_province = 4093
					4093 = { 
						has_province_modifier = blorc_plunder_camp
						has_fort_building_trigger = yes
					}
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = mb_dark_below_nocap_tt
					always = no
				}
			}
		}

		effect = {
			set_country_flag = mb_dark_below_flg
			swap_non_generic_missions = yes
			country_event = {
				id = flavour_maskedbutcher.2
			}
		}
	}
}

maskedbutcher_missions_4 = {
	slot = 4
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			tag = H81
			AND = {
				was_tag = H81
				NOT = { tag = Z57 }
			}
		}
	}

}

maskedbutcher_missions_3b = {
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			tag = H81
			AND = {
				was_tag = H81
				NOT = { tag = Z57 }
			}
		}
		has_country_flag = mb_dark_below_flg
	}

	H81_maskedbutcher_ties_that_bind = {
		icon = mission_burning_man
		required_missions = {
			H81_maskedbutcher_dark_below
		}
		position = 5

		provinces_to_highlight = {
			AND = {
				OR = {
					area = orlghelovar_area
					area = south_altar_area
					area = north_altar_area
					area = argrod_origin_area
					province_id = 4093
					province_id = 2942
					province_id = 2943
				}
				OR = {
					is_city = no
					NOT = {
						owned_by = ROOT
						culture = ROOT
						religion = ROOT
					}
					AND = {
						NOT = {
							province_id = 4093
							province_id = 2942
							province_id = 4238
						}
						NOT = {
							development = 5
						}
					}
				}
			}
		}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = mb_ties_serpentreach_tt
				AND = {
					orlghelovar_area = {
						type = all
						owns_or_non_sovereign_subject_of = ROOT
						is_city = yes
						OR = {
							province_id = 4238
							development = 5
						}
						culture = ROOT
						religion = ROOT
					}
					south_altar_area = {
						type = all
						owns_or_non_sovereign_subject_of = ROOT
						is_city = yes
						culture = ROOT
						religion = ROOT
					}
					north_altar_area = {
						type = all
						owns_or_non_sovereign_subject_of = ROOT
						is_city = yes
						culture = ROOT
						religion = ROOT
					}
					argrod_origin_area = {
						type = all
						owns_or_non_sovereign_subject_of = ROOT
						is_city = yes
						culture = ROOT
						religion = ROOT
					}
					4093 = {
						owns_or_non_sovereign_subject_of = ROOT
						is_city = yes
						culture = ROOT
						religion = ROOT
					}
					2942 = {
						owns_or_non_sovereign_subject_of = ROOT
						is_city = yes
						culture = ROOT
						religion = ROOT
					}
					2943 = {
						owns_or_non_sovereign_subject_of = ROOT
						is_city = yes
						development = 5
						culture = ROOT
						religion = ROOT
					}
				}
			}
			has_estate_privilege = estate_church_enforced_one_faith
			OR = {
				NOT = {
					estate_influence = {
						estate = estate_church
						influence = 40
					}
				}
				estate_loyalty = {
					estate = estate_church
					loyalty = 60
				}
			}
		}

		effect = {
			set_country_flag = mb_arok_ankash_flg
			custom_tooltip = mb_mage_change_tt
			set_estate_privilege = estate_mages_organization_religious
			change_estate_land_share = {
				estate = estate_church
				share = -5
			}
			change_estate_land_share = {
				estate = estate_mages
				share = 5
			}
		}
	}
}

maskedbutcher_missions_4b = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			tag = H81
			AND = {
				was_tag = H81
				NOT = { tag = Z57 }
			}
		}
		has_country_flag = mb_dark_below_flg
	}

	H81_maskedbutcher_rulers_end = {
		icon = mission_burning_man
		required_missions = {
			H81_maskedbutcher_dawnborne
		}
		position = 2

		provinces_to_highlight = {
			OR = {
				AND = {
					owned_by = ROOT
					is_capital = yes
					NOT = { province_has_center_of_trade_of_level = 3 }
				}
				AND = {
					area = arg_ordstun_area
					has_terrain = cavern
					OR = {
						NOT = { is_city = yes }
						NOT = { owned_by = ROOT }
					}
				}
			}
		}

		trigger = {
			OR = {
				capital_scope = {
					province_has_center_of_trade_of_level = 3
				}
				AND = {
					arg_ordstun_area = {
						type = all
						owns_or_non_sovereign_subject_of = ROOT
					}
					kings_caverns_area = {
						type = all
						owns_or_non_sovereign_subject_of = ROOT
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = mb_dookan_omen_tt
				has_dookan_omen_trigger = yes
			}
		}

		effect = {
			country_event = {
				id = flavour_maskedbutcher.6
			}
			every_owned_province = {
				add_devastation = -25
			}
		}
	}
}

maskedbutcher_missions_5b = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			tag = H81
			AND = {
				was_tag = H81
				NOT = { tag = Z57 }
			}
		}
		has_country_flag = mb_dark_below_flg
	}

	H81_maskedbutcher_dawnborne = {
		icon = mission_burning_man
		required_missions = {

		}
		position = 1

		provinces_to_highlight = {
			OR = {
				AND = {
					OR = {
						province_id = 2942
						province_id = 4093
						province_id = 4238
					}
					has_province_modifier = mb_ap_dauntless_six
				}
				AND = {
					province_id = 2944
					NOT = {
						has_manpower_building_trigger = yes
						has_fort_building_trigger = yes
					}
				}
				AND = {
					owned_by = ROOT
					is_capital = yes
					NOT = {
						has_production_or_gold_building_trigger = yes
						has_manpower_building_trigger = yes
					}
				}
			}
		}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = mb_no_dauntless_hold_tt
				AND = {
					2942 = {
						NOT = {
							has_province_modifier = mb_ap_dauntless_six
						}
					}
					4093 = {
						NOT = {
							has_province_modifier = mb_ap_dauntless_six
						}
					}
					4238 = {
						NOT = {
							has_province_modifier = mb_ap_dauntless_six
						}
					}
				}
			}
			2944 = {
				owned_by = ROOT
				has_manpower_building_trigger = yes
				has_fort_building_trigger = yes
			}
			capital_scope = {
				has_manpower_building_trigger = yes
				has_production_or_gold_building_trigger = yes
			}
		}

		effect = {
			country_event = {
				id = flavour_maskedbutcher.4
			}
		}
	}

	H81_maskedbutcher_duskbound = {
		icon = mission_burning_man
		required_missions = {
			H81_maskedbutcher_dawnborne
		}
		position = 2

		provinces_to_highlight = {
			OR = {
				AND = {
					owned_by = ROOT
					has_province_modifier = mb_arianne_last_stand
					NOT = {
						num_of_units_in_province = {
							who = ROOT
							amount = 10
						}
					}
				}
				AND = {
					owned_by = ROOT
					province_with_mineable_goods = yes
					NOT = {
						has_production_building_trigger = yes
					}
				}
			}
		}

		trigger = {
			any_owned_province = {
				has_province_modifier = mb_arianne_last_stand
				num_of_units_in_province = {
					who = ROOT
					amount = 10
				}
			}
			calc_true_if = {
				all_owned_province = {
					province_with_mineable_goods = yes
					has_production_building_trigger = yes
				}
				amount = 2
			}
			OR = {
				custom_trigger_tooltip = {
					tooltip = has_cast_broad_ward_tt
					any_owned_province = {
						OR = {
							has_province_modifier = magic_estate_broad_ward_1
							has_province_modifier = magic_estate_broad_ward_2
							has_province_modifier = magic_estate_broad_ward_3
						}
					}
				}
				court_mage = 3
			}
		}

		effect = {
			country_event = {
				id = flavour_maskedbutcher.5
			}
		}
	}
}

maskedbutcher_missions_4c = {
	slot = 4
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			tag = H81
			AND = {
				was_tag = H81
				NOT = { tag = Z57 }
			}
		}
		has_country_flag = mb_falsedragon_flg
	}

	H81_maskedbutcher_follow_lights = {
		icon = mission_burning_man
		required_missions = {
			H81_maskedbutcher_rulers_end
			H81_maskedbutcher_duskbound
		}
		position = 3

		provinces_to_highlight = {
			OR = {
				AND = {
					owned_by = ROOT
					is_capital = yes
					NOT = { has_tax_building_trigger = yes }
				}
				AND = {
					province_id = 4033
					NOT = { owned_by = ROOT }
					NOT = { has_building = mage_tower }
					NOT = { base_production = 5 }
				}
			}
		}

		trigger = {
			capital_scope = { has_tax_building_trigger = yes }
			4033 = {
				owned_by = ROOT
				has_building = mage_tower
				base_production = 5
			}
		}

		effect = {
			country_event = {
				id = flavour_maskedbutcher.7
			}
		}
	}

	H81_maskedbutcher_sleeper_awake = {
		icon = mission_burning_man
		required_missions = {
			H81_maskedbutcher_follow_lights
			H81_maskedbutcher_dark_below
		}
		position = 5

		trigger = {
			stability = 2
			if = {
				limit = { NOT = { mission_completed = H81_maskedbutcher_follow_lights } }
				hidden_trigger = {
					has_estate_privilege = estate_vampires_mask_halfling
					has_country_flag = active_frenzy_flg
				}
			}
			else = {
				has_estate_privilege = estate_vampires_mask_halfling
				custom_trigger_tooltip = {
					tooltip = has_frenzy_tt
					has_country_flag = active_frenzy_flg
				}
			}
		}

		effect = {
			country_event = {
				id = flavour_maskedbutcher.8
			}
		}
	}
}

maskedbutcher_missions_1d = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			tag = H81
			AND = {
				was_tag = H81
				NOT = { tag = Z57 }
			}
		}
		has_country_flag = mb_drowninthedeep_flg
	}

	H81_maskedbutcher_follyfall = {
		icon = mission_burning_man
		required_missions = {
			H81_maskedbutcher_by_glass_and_marble
		}
		position = 8

		provinces_to_highlight = {
			AND = {
				NOT = { owned_by = ROOT }
				AND = {
					region = daravans_folly_region
					NOT = { province_id = 451 }
				}
			}
		}

		trigger = {
			daravans_folly_region = {
				type = all
				OR = {
					province_id = 451
					AND = {
						owned_by = ROOT
						development = 8
					}
				}
			}
			num_of_owned_provinces_with = {
				amount = 3
				region = daravans_folly_region
				has_tax_building_trigger = yes
			}
		}

		effect = {
			custom_tooltip = gnoll_reserve_tt
			every_owned_province = {
				limit = { region = daravans_folly_region }
				change_culture = flamemarked_gnoll
				add_province_modifier = {
					name = mb_reserve
					duration = -1
				}
			}
		}
	}
}