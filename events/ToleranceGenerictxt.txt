namespace = tolerance_generic

#Flavour events valid for multiple races
country_event = {	#Scapegoats
	id = tolerance_generic.1
	title = tolerance_generic.1.t
	desc = tolerance_generic.1.d
	picture = BAD_WITH_MONARCH_eventPicture
	is_triggered_only = yes
	trigger = {	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { 
					OR = {
						has_any_oppressed_minority_trigger = yes
						has_any_coexisting_minority_trigger = yes
					}
				}
				save_random_present_race_as_flag_effect = { flag = propflag2 prevflag = propflag }
			}
		}
	}

	option = {
		name = tolerance_generic.1.1
		trigger = { NOT = { ruler_has_personality = cruel_personality }	}
		reduce_stability_or_adm_power = yes
		add_prestige = -10
	}

	option = {
		name = tolerance_generic.1.2
		trigger = {
			NOT = {
				ruler_has_personality = just_personality
				ruler_has_personality = kind_hearted_personality
			}	
		}
		effect_for_saved_race = { flag = propflag scripted_effect = tolerance_generic_1_effect }
	}

	option = {
		name = tolerance_generic.1.3
		trigger = {
			NOT = {
				ruler_has_personality = just_personality
				ruler_has_personality = kind_hearted_personality
			}
			any_owned_province = {
				OR = {
					has_any_coexisting_minority_trigger = yes
					has_any_oppressed_minority_trigger = yes
				}
			}
			NOT = { has_country_flag = no_second_minority }			
		}
		effect_for_saved_race = { flag = propflag2 scripted_effect = tolerance_generic_1_effect }
	}

	option = {
		name = tolerance_generic.1.4
		highlight = yes
		trigger = {
			NOT = {
				any_owned_province = {
					has_any_coexisting_minority_trigger = yes
					has_any_oppressed_minority_trigger = yes
				}
			}
		}
		add_stability_or_adm_power = yes
		add_prestige = -10
	}

	after = {
		clear_random_race_flags = { flag = propflag }
		clear_random_race_flags = { flag = propflag2 }
	}
}

country_event = {	#Tragedy Strikes!
	id = tolerance_generic.2
	title = tolerance_generic.2.t
	desc = tolerance_generic.2.d
	picture = ANGRY_MOB_eventPicture
	is_triggered_only = yes
	trigger = { 
		any_owned_province = { has_province_flag = mob_province }
	}
	
	immediate = {
		random_owned_province = { 
			limit = { has_province_flag = mob_province }
			hidden_effect = { save_event_target_as = mob_province }
		}
	}

	option = {
		name = tolerance_generic.2.1		
		goto = mob_province		
		effect_for_saved_race = { flag = mob scripted_effect = tolerance_generic_2_effect }
		clear_random_race_flags = { flag = mob }
	}
}

country_event = {	#Send Smallfolks to Aelantir
	id = tolerance_generic.3
	title = tolerance_generic.3.t
	desc = tolerance_generic.3.d
	picture = muslimgfx_COLONIZATION_eventPicture
	is_triggered_only = yes
	trigger = {}

	immediate = {
		hidden_effect = {
			if = {
				limit = { has_country_flag = tolgen3_goblin }
				random_owned_province = {
					limit = { culture_is_goblin = yes }
					save_event_target_as = goblin_origin
				}
				clr_country_flag = tolgen3_goblin
			}
			else_if = {
				limit = { has_country_flag = tolgen3_halfling }
				random_owned_province = {
					limit = { culture_is_halfling = yes }
					save_event_target_as = halfling_origin
				}
				clr_country_flag = tolgen3_halfling
			}
			else = {
				random_owned_province = {
					limit = { culture_is_kobold = yes }
					save_event_target_as = kobold_origin
				}
			}
			random_owned_province = {
				limit = { is_colony = yes }
				save_event_target_as = settlers_destinations
			}
		}
	}

	option = {
		name = tolerance_generic.3.1
		goto = settlers_destinations
		add_treasury = -50
		if = {
			limit = { has_saved_event_target = goblin_origin }
			tolerance_generic_3_effect = { race = goblin }
		}
		else_if = {
			limit = { has_saved_event_target = halfling_origin }
			tolerance_generic_3_effect = { race = halfling }
		}
		else = {
			tolerance_generic_3_effect = { race = kobold }
		}
	}

	option = {
		name = tolerance_generic.3.2
		goto = settlers_destinations
		if = {
			limit = { has_saved_event_target = goblin_origin }
			tolerance_generic_3_effect = { race = goblin }
			medium_decrease_of_goblin_tolerance_effect = yes
		}
		else_if = {
			limit = { has_saved_event_target = halfling_origin }
			tolerance_generic_3_effect = { race = halfling }
			medium_decrease_of_halfling_tolerance_effect = yes
		}
		else = {
			tolerance_generic_3_effect = { race = kobold }
			medium_decrease_of_kobold_tolerance_effect = yes
		}
	}
}