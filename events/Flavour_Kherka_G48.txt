
namespace = flavour_kherka

country_event = { #Starting Event
	id = flavour_kherka.1
	title = flavour_kherka.1.t
	desc = flavour_kherka.1.d
	picture = SWORD_OF_OSMAN_eventPicture
	
	fire_only_once = yes

	trigger = { tag = G48 }

    option  = {
        name = flavour_kherka.1.a
        G50 = {
            every_owned_province = {
                add_permanent_claim = ROOT
            }
        }
        G49 = {
            every_owned_province = {
                add_permanent_claim = ROOT
            }
        }
    }
}

country_event = { #Merchant's Beware
	id = flavour_kherka.2
	title = flavour_kherka.2.t
	desc = flavour_kherka.2.d
	picture = SWORD_OF_OSMAN_eventPicture
	
	fire_only_once = yes

	trigger = {}

    option  = {
        name = flavour_kherka.1.a
        2773 = { center_of_trade = 1 }
        if = {
            limit = { has_country_flag = schemers_in_power }
            2738 = {
                add_devastation = 100
                add_unrest = 10
            }
            add_treasury = 400
        }
        else = {
            2738 = {
                add_devastation = 50
                add_unrest = 10
            }
            add_treasury = 200
        }
    }
}

country_event = { #Shift The Tide
	id = flavour_kherka.3
	title = flavour_kherka.3.t
	desc = flavour_kherka.3.d
	picture = SWORD_OF_OSMAN_eventPicture
	
	fire_only_once = yes

	trigger = {}

    option  = {
        name = flavour_kherka.3.a
        custom_tooltip = G48_shift_the_tide_tt
        if = {
            limit = { 
                NOT = { has_country_flag = has_degarikes }
            }
            country_event = { id = kheionai.32 }
        }
        G59 = {
            if = {
                limit = { 
                    NOT = { has_country_flag = has_degarikes }
                }
                country_event = { id = kheionai.32 }
            }
            add_country_modifier = {
                name = G48_heart_of_the_navy
                duration = -1
            }
            add_country_modifier = {
                name = G48_mass_degarikes
                duration = -1
            }
        }
        if = {
            limit = {
                has_country_flag = colonists_in_power 
            }
            define_advisor = {
                type = naval_reformer 
                skill = 3
                cost_multiplier = 0.5
            }
        }
    }
}

#Election Stuff
country_event = { 
	id = flavour_kherka.1000
	title = flavour_kherka.1000.t
	desc = {
        trigger = { has_country_flag = stalwarts_in_power }
        desc = flavour_kherka.1000.d
    }
	desc = {
        trigger = { has_country_flag = militants_in_power }
        desc = flavour_kherka.1000.d.1
    }
	desc = {
        trigger = { has_country_flag = colonists_in_power }
        desc = flavour_kherka.1000.d.2
    }
	desc = {
        trigger = { has_country_flag = schemers_in_power }
        desc = flavour_kherka.1000.d.3
    }
	picture = SHIP_SAILING_eventPicture

    is_triggered_only = yes 

    trigger = {}

    immediate = {
        hidden_effect = {
            clr_country_flag = stalwarts_in_power
            clr_country_flag = militants_in_power
            clr_country_flag = colonists_in_power
            clr_country_flag = schemers_in_power
            random_list = {
                1 = {
                    set_country_flag = stalwarts_in_power
                }
                1 = {
                    set_country_flag = militants_in_power
                }
                1 = {
                    set_country_flag = colonists_in_power
                }
                1 = {
                    set_country_flag = schemers_in_power
                }
            }
            define_exiled_ruler = { #Stalwarts
                exiled_as = irenthegenea_candidate
                change_adm = 2
                dynasty = Irenthegenea
                option = 0
            }
            define_exiled_ruler = { #Stalwarts
                exiled_as = varagenea_candidate
                change_adm = 2
                dynasty = Varagenea
                option = 1
            }
            define_exiled_ruler = { #Stalwarts
                exiled_as = elethogenea_candidate
                change_adm = 2
                dynasty = Elethogenea 
                option = 2
            }
            define_exiled_ruler = { #Militants
                exiled_as = artogenea_candidate
                change_mil = 2
                dynasty = Artogenea 
                option = 3
            }
            define_exiled_ruler = { #Militants
                exiled_as = nestegenea_candidate
                change_mil = 2
                dynasty = Nestegenea  
                option = 4
            }
            define_exiled_ruler = { #Colonists
                exiled_as = galengenea_candidate
                change_adm = 1
                change_dip = 1
                dynasty = galengenea  
                option = 5
            }
            define_exiled_ruler = { #Colonists
                exiled_as = taelagenea_candidate
                change_adm = 1
                change_dip = 1
                dynasty = Taelagenea
                option = 6  
            }
            define_exiled_ruler = { #Schemers
                exiled_as = serogenea_candidate
                change_dip = 1
                change_mil = 1
                dynasty = Serogenea
                option = 7
            }
            define_exiled_ruler = { #Schemers
                exiled_as = darasgenea_candidate
                change_dip = 1
                change_mil = 1
                dynasty = Darasgenea
                option = 8  
            }
            define_exiled_ruler = { #Schemers
                exiled_as = kelasgenea_candidate
                change_dip = 1
                change_mil = 1
                dynasty = Kelasgenea  
                option = 9
            }
        }
    }

    option = {
        name = flavour_kherka.1000.a #Random Faction
        if = {
            limit = {
                has_country_flag = stalwarts_in_power
            }
            kherka_set_ruler = { stalwarts = yes }
        }
        else_if = {
            limit = {
                has_country_flag = militants_in_power
            }
            kherka_set_ruler = { militants = yes }
        }
        else_if = {
            limit = {
                has_country_flag = colonists_in_power
            }
            kherka_set_ruler = { colonists = yes }
        }
        else_if = {
            limit = {
                has_country_flag = schemers_in_power
            }
            kherka_set_ruler = { schemers = yes }
        }
    }
    
    option = {
        name = flavour_kherka.1000.b #Stalwart Faction
        trigger = { NOT = { has_country_flag = stalwarts_in_power } }
        kherka_set_ruler = { stalwarts = yes }
        add_republican_tradition = -20
    }

    option = {
        name = flavour_kherka.1000.c
        trigger = { NOT = { has_country_flag = militants_in_power } }
        kherka_set_ruler = { militants = yes }
        add_republican_tradition = -20
    }

    option = {
        name = flavour_kherka.1000.d
        trigger = { NOT = { has_country_flag = colonists_in_power } }
        kherka_set_ruler = { colonists = yes }
        add_republican_tradition = -20
    }

    option = {
        name = flavour_kherka.1000.e
        trigger = { NOT = { has_country_flag = schemers_in_power } }
        kherka_set_ruler = { schemers = yes }
        add_republican_tradition = -20
    }
}