namespace = genie_cult

# Genie cult power gain
country_event = {
	id = genie_cult.1
	title = genie_cult.1.t
	desc = genie_cult.1.d
	picture = RELIGIOUS_CONVERSION_eventPicture
	
	hidden = yes
	is_triggered_only = yes
	
	trigger = {
		religion = genie_cult
	}
	
	option = {
		name = genie_cult.1.a
		
		clr_country_flag = genie_cult_power_gain_flag
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = genie_cult_power_counter
						value = 10
					}
				}
			}
			change_variable = {
				which = genie_cult_power_counter
				value = 1
			}
		}
		country_event = {
			id = genie_cult.2
			days = 1094
		}
	}
}

country_event = {
	id = genie_cult.2
	title = genie_cult.2.t
	desc = genie_cult.2.d
	picture = RELIGIOUS_CONVERSION_eventPicture
	
	hidden = yes
	is_triggered_only = yes
	
	trigger = {
		religion = genie_cult
	}

	option = {
		name = genie_cult.2.a
		
		set_country_flag = genie_cult_power_gain_flag
		capital_scope = {
			add_province_triggered_modifier = genie_cult_power_gain
		}
	}
}

#Genie Cult Power Menu
country_event = {
	id = genie_cult.3
	title = genie_cult.3.t
	desc = genie_cult.3.d
	picture = RELIGIOUS_CONVERSION_eventPicture
	
	is_triggered_only = yes

	option = {
		name = genie_cult.3.a
		country_event = {
			id = genie_cult.4
		}
	}

	option = {
		name = genie_cult.3.b
		trigger = {
			custom_trigger_tooltip = {
				tooltip = genie_cult_has_at_least_2_power_tt
				check_variable = {
					which = genie_cult_power_counter
					value = 2
				}
			}
		}
		country_event = {
			id = genie_cult.5
		}
	}

	option = {
		name = genie_cult.3.c
		trigger = {
			custom_trigger_tooltip = {
				tooltip = genie_cult_has_at_least_3_power_tt
				check_variable = {
					which = genie_cult_power_counter
					value = 3
				}
			}
		}
		country_event = {
			id = genie_cult.6
		}
	}

	option = {
		name = genie_cult.3.dd
		trigger = {
			custom_trigger_tooltip = {
				tooltip = genie_cult_has_at_least_4_power_tt
				check_variable = {
					which = genie_cult_power_counter
					value = 4
				}
			}
		}
		country_event = {
			id = genie_cult.7
		}
	}

	option = {
		name = genie_cult.3.e
		clr_country_flag = genie_cult_power_menu_open
	}
}

#Power Incantations (Cost 1)
country_event = {
	id = genie_cult.4
	title = genie_cult.4.t
	desc = genie_cult.4.d
	picture = RELIGIOUS_CONVERSION_eventPicture
	
	is_triggered_only = yes

	option = {
		name = genie_cult.4.a
		add_country_modifier = {
			name = warmth_of_life
			duration = 1825
		}
	}

	option = {
		name = genie_cult.4.b
		add_country_modifier = {
			name = guiding_sands
			duration = 1825
		}
	}

	option = {
		name = genie_cult.4.c
		country_event = {
			id = genie_cult.3
		}
	}
}

#Charge Incantations (Cost 2)
country_event = {
	id = genie_cult.5
	title = genie_cult.5.t
	desc = genie_cult.5.d
	picture = RELIGIOUS_CONVERSION_eventPicture
	
	is_triggered_only = yes

	option = {
		name = genie_cult.5.a
		add_country_modifier = {
			name = lightrocks
			duration = 1825
		}
	}

	option = {
		name = genie_cult.5.b
		add_country_modifier = {
			name = armor_off
			duration = 1825
		}
	}

	option = {
		name = genie_cult.5.c
		add_country_modifier = {
			name = battle_fervor
			duration = 1825
		}
	}

	option = {
		name = genie_cult.5.dd
		country_event = {
			id = genie_cult.3
		}
	}
}

#Charge Incantations (Cost 3)
country_event = {
	id = genie_cult.6
	title = genie_cult.6.t
	desc = genie_cult.6.d
	picture = RELIGIOUS_CONVERSION_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					NOT = { is_capital_of = ROOT }
					development = 11
				}
				save_event_target_as = emerald_splash_target
			}
			random_owned_province = {
				limit = {
					has_port = yes
				}
				save_event_target_as = restoration_of_fallen_crafts_target
			}
		}
	}

	option = {
		name = genie_cult.6.a
		trigger = {
			OR = {
				has_adopted_cult = jannu_cult
				has_adopted_cult = tanizuland_cult
			}
		}
		add_country_modifier = {
			name = perfection_of_home
			duration = 1825
		}
	}

	option = {
		name = genie_cult.6.b
		trigger = {
			OR = {
				has_adopted_cult = jannu_cult
				has_adopted_cult = tanizuland_cult
			}
		}
		if = {
			limit = { has_saved_event_target = emerald_splash_target }
			event_target:emerald_splash_target = {
				add_base_tax = -1
				add_base_production = -1
				add_base_manpower = -1
				random_list = {
					1 = {
						change_trade_goods = gems
					}
					19 = {
					}
				}
			}
			add_years_of_income = 0.5
		}
		else = {
			custom_tooltip = emeral_splash_tt
		}
	}

	option = {
		name = genie_cult.6.c
		trigger = {
			OR = {
				has_adopted_cult = naqi_cult
				has_adopted_cult = fidiya_cult
			}
		}
		add_country_modifier = {
			name = blaze_of_glory
			duration = 1825
		}
	}

	option = {
		name = genie_cult.6.dd
		trigger = {
			OR = {
				has_adopted_cult = naqi_cult
				has_adopted_cult = fidiya_cult
			}
		}
		custom_tooltip = fire_wall_tt
		every_owned_province = {
			limit = {
				has_fort_building_trigger = yes
			}
			add_province_modifier = {
				name = fire_wall
				duration = 1825
			}
		}
	}

	option = {
		name = genie_cult.6.e
		trigger = {
			OR = {
				has_adopted_cult = al_dimiryat_cult
				has_adopted_cult = grand_sultan_cult
			}
			manpower = 3
		}
		add_manpower = -3
		custom_tooltip = due_judgement_tt
		hidden_effect = {
			random_list = {
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = philosopher cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = natural_scientist cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = artist cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = treasurer cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = theologian cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = master_of_mint cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = inquisitor cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = statesman cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = naval_reformer cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = trader cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = spymaster cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = diplomat cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = navigator cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = army_reformer cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = army_organiser cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = commandant cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = quartermaster cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = recruitmaster cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = fortification_expert cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = grand_captain cost_multiplier = 0.25 }
				}
				1 = {
					generate_scaled_advisor_of_type_and_cost_effect = { type = court_mage cost_multiplier = 0.25 }
				}
			}
		}
		if = {
			limit = { government_rank = 2 }
			add_stability = 2
		}
		else = {
			add_stability = 1
		}
	}

	option = {
		name = genie_cult.6.f
		trigger = {
			OR = {
				has_adopted_cult = al_dimiryat_cult
				has_adopted_cult = grand_sultan_cult
			}
		}
		add_country_modifier = {
			name = holy_winds
			duration = 1825
		}
	}

	option = {
		name = genie_cult.6.g
		trigger = {
			OR = {
				has_adopted_cult = dakinshi_cult
				has_adopted_cult = vyzemby_cult
			}
			any_owned_province = {
				has_port = yes
			}
		}
		add_country_modifier = {
			name = restoration_of_fallen_crafts
			duration = 3650
		}
		event_target:restoration_of_fallen_crafts_target = {
			heavy_ship = ROOT
			heavy_ship = ROOT
			heavy_ship = ROOT
			heavy_ship = ROOT
			heavy_ship = ROOT
			heavy_ship = ROOT
			heavy_ship = ROOT
			heavy_ship = ROOT
			heavy_ship = ROOT
			heavy_ship = ROOT
		}
	}

	option = {
		name = genie_cult.6.h
		trigger = {
			OR = {
				has_adopted_cult = dakinshi_cult
				has_adopted_cult = vyzemby_cult
			}
		}
		if = {
			limit = {
				home_trade_node = {
					trade_share = {
						country = ROOT
						share = 100
					}
				}
			}
			add_country_modifier = {
				name = siren_chant_5
				duration = 1825
			}
		}
		else_if = {
			limit = {
				home_trade_node = {
					trade_share = {
						country = ROOT
						share = 80
					}
				}
			}
			add_country_modifier = {
				name = siren_chant_4
				duration = 1825
			}
		}
		else_if = {
			limit = {
				home_trade_node = {
					trade_share = {
						country = ROOT
						share = 60
					}
				}
			}
			add_country_modifier = {
				name = siren_chant_3
				duration = 1825
			}
		}
		else_if = {
			limit = {
				home_trade_node = {
					trade_share = {
						country = ROOT
						share = 40
					}
				}
			}
			add_country_modifier = {
				name = siren_chant_2
				duration = 1825
			}
		}
		else = {
			add_country_modifier = {
				name = siren_chant_1
				duration = 1825
			}
		}
	}

	option = {
		name = genie_cult.6.i
		country_event = {
			id = genie_cult.3
		}
	}
}

#Charge Incantations (Cost 4)
country_event = {
	id = genie_cult.7
	title = genie_cult.7.t
	desc = genie_cult.7.d
	picture = RELIGIOUS_CONVERSION_eventPicture
	
	is_triggered_only = yes

	option = {
		name = genie_cult.7.a
		trigger = {
			has_adopted_cult = vyzemby_cult
		}
	}

	option = {
		name = genie_cult.7.b
		trigger = {
			has_adopted_cult = horasesh_cult
		}
	}

	option = {
		name = genie_cult.7.c
		trigger = {
			has_adopted_cult = darbanar_cult
		}
	}

	option = {
		name = genie_cult.7.dd
		trigger = {
			has_adopted_cult = dakinshi_cult
		}
	}

	option = {
		name = genie_cult.7.e
		trigger = {
			has_adopted_cult = brasan_cult
		}
	}

	option = {
		name = genie_cult.7.f
		trigger = {
			has_adopted_cult = al_dimiryat_cult
		}
	}

	option = {
		name = genie_cult.7.g
		trigger = {
			has_adopted_cult = jannu_cult
		}
	}

	option = {
		name = genie_cult.7.h
		trigger = {
			has_adopted_cult = tanizuland_cult
		}
	}

	option = {
		name = genie_cult.7.i
		trigger = {
			has_adopted_cult = fidiya_cult
		}
	}

	option = {
		name = genie_cult.7.j
		trigger = {
			has_adopted_cult = grand_sultan_cult
		}
	}

	option = {
		name = genie_cult.7.k
		trigger = {
			has_adopted_cult = naqi_cult
		}
	}

	option = {
		name = genie_cult.7.l
		trigger = {
			has_adopted_cult = ardimya_cult
		}
	}

	option = {
		name = genie_cult.7.m
		country_event = {
			id = genie_cult.3
		}
	}
}