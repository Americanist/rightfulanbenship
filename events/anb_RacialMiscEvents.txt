
namespace = racial_misc

# Half-orc heir
country_event = {
	id = racial_misc.1
	title = racial_misc.1.t
	desc = racial_misc.1.d
	picture = NEW_HEIR_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			AND = {
				ruler_is_human = yes
				consort_is_orcish = yes
			}
			AND = {
				ruler_is_orcish = yes
				consort_is_human = yes
			}
			AND = {
				ruler_is_human = yes
				consort_is_half_orcish = yes
			}
			AND = {
				ruler_is_half_orcish = yes
				consort_is_human = yes
			}
			AND = {
				ruler_is_orcish = yes
				consort_is_half_orcish = yes
			}
			AND = {
				ruler_is_half_orcish = yes
				consort_is_orcish = yes
			}
			AND = {
				ruler_is_half_orcish = yes
				consort_is_half_orcish = yes
			}
			AND = {
				ruler_is_elven = yes
				consort_is_orcish = yes
			}
			AND = {
				ruler_is_orcish = yes
				consort_is_elven = yes
			}
			AND = {
				ruler_is_half_elven = yes
				consort_is_orcish = yes
			}
			AND = {
				ruler_is_orcish = yes
				consort_is_half_elven = yes
			}
			AND = {
				ruler_is_half_elven = yes
				consort_is_half_orcish = yes
			}
			AND = {
				ruler_is_half_orcish = yes
				consort_is_half_elven = yes
			}
		}
		has_heir = yes
		NOT = { heir_is_half_orcish = yes }
		NOT = { has_heir_flag = set_heir_race }
		NOT = { heir_age = 16 }
		NOT = { tag = Z57 } # Karashar
	}
	
	option = {		# Good
		name = racial_misc.1.a
		if = {
			limit = {
				primary_culture = grombar_half_orc
			}
			set_heir_culture = grombar_half_orc
		}
		else = {
			set_heir_culture = half_orc
		}
		hidden_effect = {
			clear_fast_heir_flags = yes
			set_heir_flag = half_orcish_heir
		}
	}
}

# Half-elf heir
country_event = {
	id = racial_misc.2
	title = racial_misc.2.t
	desc = racial_misc.2.d
	picture = NEW_HEIR_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			AND = {
				ruler_is_human = yes
				consort_is_elven = yes
			}
			AND = {
				ruler_is_elven = yes
				consort_is_human = yes
			}
			AND = {
				ruler_is_half_elven = yes
				consort_is_elven = yes
			}
			AND = {
				ruler_is_elven = yes
				consort_is_half_elven = yes
			}
			AND = {
				ruler_is_half_elven = yes
				consort_is_half_elven = yes
			}
			AND = {
				ruler_is_elven = yes
				consort_is_half_orcish = yes
			}
			AND = {
				ruler_is_half_orcish = yes
				consort_is_elven = yes
			}
		}
		has_heir = yes
		NOT = { heir_is_half_elven = yes }
		NOT = { has_heir_flag = set_heir_race }
		NOT = { heir_age = 16 }
	}
	
	option = {		# Good
		name = racial_misc.2.a
		if = {
			limit = { 
				or = {
					ruler_is_bulwari = yes
					ruler_culture = sun_elf
					ruler_culture = desert_elf
				}
			}
			set_heir_culture = bulwari_half_elf
		}
		else_if = {
			limit = { 
				or = {
					ruler_culture = high_lorentish
					ruler_culture = low_lorentish
					ruler_culture = derannic
					ruler_culture = sorncosti
					ruler_culture = sornicandi
					ruler_culture = roilsardi
					ruler_culture = iochander
					ruler_culture = carnetori
					consort_culture = high_lorentish
					consort_culture = low_lorentish
					consort_culture = derannic
					consort_culture = sorncosti
					consort_culture = sornicandi
					consort_culture = roilsardi
					consort_culture = iochander
					consort_culture = carnetori
				}
			}
			set_heir_culture = lencori_half_elf
		}
		else_if = {
			limit = { 
				or = {
					ruler_culture = busilari
					ruler_culture = tefori
					ruler_culture = ilatani
					consort_culture = busilari
					consort_culture = tefori
					consort_culture = ilatani
				}
			}
			set_heir_culture = businori_half_elf
		}
		else_if = {
			limit = { 
				or = {
					ruler_culture = corvurian
					ruler_culture = neratican
					ruler_culture = ourdi
					ruler_culture = cardesti
					ruler_culture = dostanorian
					ruler_culture = ravenmarcher_d
					ruler_culture = nathalairey
					consort_culture = corvurian
					consort_culture = neratican
					consort_culture = ourdi
					consort_culture = cardesti
					consort_culture = dostanorian
					consort_culture = ravenmarcher_d
					consort_culture = nathalairey
				}
			}
			set_heir_culture = dostanorian_half_elf
		}
		else_if = {
			limit = { 
				or = {
					ruler_culture = gawedi
					ruler_culture = old_alenic
					ruler_culture = blue_reachman
					ruler_culture = vertesker
					ruler_culture = moorman
					ruler_culture = wexonard
					ruler_culture = marrodic
					consort_culture = gawedi
					consort_culture = old_alenic
					consort_culture = blue_reachman
					consort_culture = vertesker
					consort_culture = moorman
					consort_culture = wexonard
					consort_culture = marrodic
				}
			}
			set_heir_culture = alenic_half_elf
		}
		else_if = {
			limit = { 
				or = {
					ruler_culture = black_castanorian
					ruler_culture = castanorian
					ruler_culture = castellyrian
					ruler_culture = marcher
					ruler_culture = adenner
					ruler_culture = white_reachman
					ruler_culture = merine
					ruler_culture = luciander
					ruler_culture = ancardian
					ruler_culture = rogieran
					ruler_culture = elikhander
					ruler_culture = heartman
					ruler_culture = alenori
					ruler_culture = stalboric
					ruler_culture = ravenmarcher
					ruler_culture = ionnic
					ruler_culture = estairey
					ruler_culture = anbenlander
					ruler_culture = nurcestiran
					ruler_culture = esthili
					ruler_culture = rosanda
					ruler_culture = corintari
					ruler_culture = farrani
					ruler_culture = black_demesner
					consort_culture = black_castanorian
					consort_culture = castanorian
					consort_culture = castellyrian
					consort_culture = marcher
					consort_culture = adenner
					consort_culture = white_reachman
					consort_culture = merine
					consort_culture = luciander
					consort_culture = ancardian
					consort_culture = rogieran
					consort_culture = elikhander
					consort_culture = heartman
					consort_culture = alenori
					consort_culture = stalboric
					consort_culture = ravenmarcher
					consort_culture = ionnic
					consort_culture = estairey
					consort_culture = anbenlander
					consort_culture = nurcestiran
					consort_culture = esthili
					consort_culture = rosanda
					consort_culture = corintari
					consort_culture = farrani
					consort_culture = black_demesner
				}
			}
			set_heir_culture = farrani_half_elf
		}
		else_if = {
			limit = { 
				or = {
					ruler_culture = ranilau
					ruler_culture = biengdi
					ruler_culture = gon
					ruler_culture = risbeko
					ruler_culture = teplin
					consort_culture = ranilau
					consort_culture = biengdi
					consort_culture = gon
					consort_culture = risbeko
					consort_culture = teplin
				}
			}
			set_heir_culture = bom_half_elf
		}
		else_if = {
			limit = { 
				or = {
					ruler_culture = phonan
					ruler_culture = hinphat
					ruler_culture = bokai
					ruler_culture = binhrung
					ruler_culture = sikai
					ruler_culture = khom
					consort_culture = phonan
					consort_culture = hinphat
					consort_culture = bokai
					consort_culture = binhrung
					consort_culture = sikai
					consort_culture = khom
				}
			}
			set_heir_culture = kai_half_elf
		}
		else_if = {
			limit = { 
				or = {
					ruler_culture = kelino
					ruler_culture = jahe_kelino
					ruler_culture = kano_kelino
					ruler_culture = yan_kelino
					ruler_culture = gataw
					consort_culture = kelino
					consort_culture = jahe_kelino
					consort_culture = kano_kelino
					consort_culture = yan_kelino
					consort_culture = gataw
				}
			}
			set_heir_culture = kelino_half_elf
		}
		else = {
			set_heir_culture = anbennarian_half_elf
		}
		hidden_effect = {
			clear_fast_heir_flags = yes
			set_heir_flag = half_elven_heir
		}
	}
}

# Half-elf to human
country_event = {
	id = racial_misc.3
	title = racial_misc.3.t
	desc = racial_misc.3.d
	picture = NEW_HEIR_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			AND = {
				ruler_is_human = yes
				consort_is_half_elven = yes
			}
			AND = {
				ruler_is_half_elven = yes
				consort_is_human = yes
			}
		}
		has_heir = yes
		NOT = { heir_is_human = yes }
		NOT = { has_heir_flag = set_heir_race }
	}
	
	option = {		# Good
		name = racial_misc.3.a
		remove_heir_personality = immortal_personality
		clr_heir_flag = long_lived_ruler
		if = {
			limit = {
				ruler_is_human = yes
			}
			set_heir_culture = new_variable:ruler_culture
		}
		else_if = {
			limit = {
				culture_is_human = yes
			}
			set_heir_culture = ROOT
		}
		else = {
			set_heir_culture = new_variable:consort_culture
		}
		hidden_effect = {
			clear_fast_heir_flags = yes
			set_heir_flag = human_heir
		}
	}
}

country_event = { #Harpy Heir
	id = racial_misc.4
	title = racial_misc.4.t
	desc = racial_misc.4.d
	picture = NEW_HEIR_eventPicture

	is_triggered_only = yes


	trigger = {
		consort_is_harpy = yes
		heir_is_harpy = no
		OR = {
			ruler_is_human = yes
			ruler_is_elven = yes
			ruler_is_half_elven = yes
			ruler_is_half_orcish = yes
			ruler_is_orcish = yes
			ruler_is_goblin = yes
			ruler_is_hobgoblin = yes
            ruler_is_ruinborn = yes
		}
	}

	option = {	#Good 
		name = racial_misc.4.a
		hidden_effect = {
			kill_heir = { allow_new_heir = no }
			define_heir = {
				female = yes
			}
			set_heir_culture = new_variable:consort_culture
			clear_fast_heir_flags = yes
			set_heir_flag = harpy_heir
			set_heir_flag = set_heir_race #this has to be here because we make a new heir—it'll trigger racial_misc.10 otherwise
		}
	}
}

# Correct heir race due to event heirs being primary culture
country_event = {
	id = racial_misc.10
	title = racial_misc.10.t
	desc = racial_misc.10.d
	picture = NEW_HEIR_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	trigger = {
		government = monarchy
		NOT = { has_matching_race_ruler_to_heir = yes }
		NOT = { has_heir_flag = set_heir_race }
	}
	
	option = {
		set_heir_culture = new_variable:ruler_culture
		clear_fast_heir_flags = yes
		update_heir_racial_flag = yes
	}
}
