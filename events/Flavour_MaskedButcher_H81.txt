namespace = flavour_maskedbutcher

#Expedition
country_event = {
	id = flavour_maskedbutcher.1
	title = flavour_maskedbutcher.1.t
	desc = flavour_maskedbutcher.1.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.1.a
		set_country_flag = mb_expedition_done_flag
		add_manpower = -1
		add_treasury = 50
		add_adm_power = 50
		add_dip_power = 50
		add_mil_power = 50
	}
}

#Into The Pit
country_event = {
	id = flavour_maskedbutcher.2
	title = flavour_maskedbutcher.2.t
	desc = flavour_maskedbutcher.2.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.2.a
		add_country_modifier = {
			name = mb_otar_on_the_move
			duration = -1
		}
		if = {
			limit = {
				NOT = {
					capital = 4238
				}
			}
			4238 = {
				add_province_triggered_modifier = mb_ap_dauntless_six
				add_province_modifier = {
					name = mb_ap_tracker
					hidden = yes
					duration = 730
				}
			}
		}
		else = {
			2942 = {
				add_province_triggered_modifier = mb_ap_dauntless_six
				add_province_modifier = {
					name = mb_ap_tracker
					hidden = yes
					duration = 730
				}
			}
		}
	}
}

#Vampire Stuff Unlock
country_event = {
	id = flavour_maskedbutcher.3
	title = flavour_maskedbutcher.3.t
	desc = flavour_maskedbutcher.3.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.3.a
		set_country_flag = mb_keepers_razor_flg
		set_country_flag = has_vampires_estate
		set_country_flag = remove_vampire_masquerade
		set_country_flag = remove_vampire_expell_landowners
		set_country_flag = remove_vampire_ownership
		custom_tooltip = mb_vampireunlock_tt
		set_estate_privilege = estate_vampires_organisation_listless_drinkers
	}
}

#A Legion Thinned
country_event = {
	id = flavour_maskedbutcher.4
	title = flavour_maskedbutcher.4.t
	desc = flavour_maskedbutcher.4.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_province_modifier = mb_ap_dauntless_six
				}
				save_global_event_target_as = dauntless_province_target
				remove_province_triggered_modifier = mb_ap_dauntless_six
			}
			set_country_flag = mb_pause_flg
		}
	}

	after = {
		clr_country_flag = mb_pause_flg
	}

	option = {
		name = flavour_maskedbutcher.4.a
		2944 = {
			add_province_modifier = {
				name = mb_advanced_fortifications
				duration = -1
			}
		}
		event_target:dauntless_province_target = {
			add_province_modifier = {
				name = mb_arianne_last_stand
				duration = -1
			}
			random_neighbor_province = {
				add_province_triggered_modifier = mb_ap_damned_four
				add_province_modifier = {
					name = mb_ap_tracker
					hidden = yes
					duration = 730
				}
			}
		}
	}
}

country_event = {
	id = flavour_maskedbutcher.5
	title = flavour_maskedbutcher.5.t
	desc = flavour_maskedbutcher.5.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes

	immediate = {
		event_target:dauntless_province_target = {
			kill_units = {
				who = ROOT
				amount = 7
			}
		}
	}

	after = {
		clear_global_event_target = dauntless_province_target
	}

	option = {
		name = flavour_maskedbutcher.5.a
		event_target:dauntless_province_target = {
			remove_province_modifier = mb_arianne_last_stand
		}
		custom_tooltip = human_mask_unlock_tt
		set_country_flag = human_mask_1
		remove_estate_privilege = estate_vampires_organisation_listless_drinkers
		set_estate_privilege = estate_vampires_organisation_purpose_of_the_blade
		set_estate_privilege = estate_vampires_mask_human
	}
}

#Adventurer Party stuff
province_event = { 
	id = flavour_maskedbutcher.40
	title = flavour_maskedbutcher.40.t
	desc = flavour_maskedbutcher.40.d
	picture = ARTWORK_eventPicture
	hidden = yes
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.40.a
		ROOT = {
			remove_province_triggered_modifier = mb_ap_dauntless_six
			remove_province_triggered_modifier = mb_ap_damned_four
			remove_province_triggered_modifier = mb_ap_desperate_two
			remove_province_triggered_modifier = mb_ap_roypeckers_fury
			remove_province_triggered_modifier = mb_ap_flight_kalas
			remove_province_triggered_modifier = mb_ap_butcherbane
			remove_province_triggered_modifier = mb_ap_roaming_heroes
			remove_province_triggered_modifier = mb_ap_world_eaters
			remove_province_triggered_modifier = mb_ap_butcherbane2
		}
	}
}

province_event = {
	id = flavour_maskedbutcher.41
	title = flavour_maskedbutcher.41.t
	desc = flavour_maskedbutcher.41.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes

	after = {
		hidden_effect = {
			ROOT = {
				province_event = {
					id = flavour_maskedbutcher.40
				}
			}
		}
	}

	option = {
		name = flavour_maskedbutcher.41.a
		random_neighbor_province = {
			limit = {
				owned_by = ROOT
				NOT = { 
					has_terrain = cavern
					province_id = 2944
					province_id = 534
					province_id = 511
				}
			}
			add_province_triggered_modifier = mb_ap_dauntless_six
			add_province_modifier = {
				name = mb_ap_tracker
				hidden = yes
				duration = 730
			}
		}
	}
}

province_event = {
	id = flavour_maskedbutcher.42
	title = flavour_maskedbutcher.42.t
	desc = flavour_maskedbutcher.42.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes

	after = {
		hidden_effect = {
			ROOT = {
				province_event = {
					id = flavour_maskedbutcher.40
				}
			}
		}
	}

	option = {
		name = flavour_maskedbutcher.42.a
		random_neighbor_province = {
			limit = {
				owned_by = ROOT
				NOT = { 
					has_terrain = cavern
					province_id = 2944
					province_id = 534
					province_id = 511
				}
			}
			if = {
				limit = {
					has_province_modifier = mb_arianne_last_stand
				}
				random_neighbor_province = {
					limit = {
						NOT = {
							has_province_modifier = mb_ap_damned_four
						}
					}
					add_province_triggered_modifier = mb_ap_damned_four
					add_province_modifier = {
						name = mb_ap_tracker
						hidden = yes
						duration = 730
					}
				}
			}
			else = {
				add_province_triggered_modifier = mb_ap_damned_four
				add_province_modifier = {
					name = mb_ap_tracker
					hidden = yes
					duration = 730
				}
			}
		}
	}
}

province_event = {
	id = flavour_maskedbutcher.43
	title = flavour_maskedbutcher.43.t
	desc = flavour_maskedbutcher.43.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.43.a
		random_neighbor_province = {
			limit = {
				owned_by = ROOT
				NOT = { 
					AND = {
						OR = {
							has_terrain = dwarven_road
							has_terrain = dwarven_hold_surface
							has_terrain = dwarven_hold
						}
						NOT = {
							has_province_flag = mb_desperate_failsafe_flg
						}
					}
					province_id = 2944
					province_id = 534
					province_id = 511
				}
			}
			add_province_triggered_modifier = mb_ap_desperate_two
			add_province_modifier = {
				name = mb_ap_tracker
				hidden = yes
				duration = 365
			}
		}
	}
}

#DEBUG
country_event = {
	id = flavour_maskedbutcher.69
	title = flavour_maskedbutcher.69.t
	desc = flavour_maskedbutcher.69.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.69.a
		set_country_flag = mb_keepers_razor_flg
		set_country_flag = mb_arok_ankash_flg
		set_country_flag = has_vampires_estate
		set_country_flag = remove_vampire_masquerade
		set_country_flag = remove_vampire_expell_landowners
		set_country_flag = remove_vampire_ownership
		set_estate_privilege = estate_vampires_organisation_listless_drinkers
	}

	option = {
		name = flavour_maskedbutcher.69.b
		set_estate_privilege = estate_vampires_organisation_purpose_of_the_blade
	}

	option = {
		name = flavour_maskedbutcher.69.c
		set_country_flag = mb_prepare_mask_flg
		set_country_flag = mb_blood_moon_flg
	}

	option = {
		name = flavour_maskedbutcher.69.e
		set_country_flag = harimari_mask_1
	}

	option = {
		name = flavour_maskedbutcher.69.f
		set_country_flag = harpy_mask_1
		set_country_flag = harpy_mask_2
	}

	option = {
		name = flavour_maskedbutcher.69.g
		set_country_flag = hobgoblin_mask_1
		set_country_flag = hobgoblin_mask_2
		set_country_flag = hobgoblin_mask_3
		set_country_flag = human_mask_1
		set_country_flag = human_mask_2
		set_country_flag = human_mask_3
	}
}

#New Ruler Event
country_event = {
	id = flavour_maskedbutcher.100
	title = flavour_maskedbutcher.100.t
	desc = flavour_maskedbutcher.100.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes

	trigger = {
		has_reform = abyssal_otardom_reform
		NOT = { has_country_flag = otardom_ongoing_election }
	}

	immediate = { 
		hidden_effect = { 
			set_country_flag = otardom_ongoing_election
		}
	}

	after = { 
		hidden_effect = { 
			clr_country_flag = otardom_ongoing_election
		} 
	}

	option = {
		name = flavour_maskedbutcher.100.a
		define_ruler = {
			min_age = 18
			max_age = 35
			change_mil = 2
			random_gender = yes
		}
	}
}

#Moonlight Upgrade
country_event = {
	id = flavour_maskedbutcher.101
	title = flavour_maskedbutcher.101.t
	desc = flavour_maskedbutcher.101.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	hidden = yes

	option = {
		name = flavour_maskedbutcher.101.a
		4033 = {
			remove_province_modifier = mb_moonlight0
			remove_province_modifier = mb_moonlight1
			remove_province_modifier = mb_moonlight2
			remove_province_modifier = mb_moonlight3
			remove_province_modifier = mb_moonlight4
			remove_province_modifier = mb_moonlight5
			remove_province_modifier = mb_moonlight6
			remove_province_modifier = mb_moonlight7
			remove_province_modifier = mb_moonlight8
			remove_province_modifier = mb_moonlight9
			remove_province_modifier = mb_moonlight10
			remove_province_modifier = mb_moonlight11
			remove_province_modifier = mb_moonlight12
			remove_province_modifier = mb_moonlight13
			remove_province_modifier = mb_moonlight14
			remove_province_modifier = mb_moonlight15
		}
		if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy15 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight15
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy14 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight14
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy13 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight13
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy12 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight12
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy11 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight11
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy10 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight10
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy9 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight9
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy8 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight8
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy7 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight7
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy6 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight6
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy5 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight5
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy4 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight4
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy3 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight3
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy2 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight2
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy1 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight1
					duration = -1
				}
			}
		}
		else = {
			4033 = {
				add_province_modifier = {
					name = mb_moonlight0
					duration = -1
				}
			}
		}
	}
}

country_event = {
	id = flavour_maskedbutcher.102
	title = flavour_maskedbutcher.102.t
	desc = flavour_maskedbutcher.102.d
	picture = ARTWORK_eventPicture
	hidden = yes
	is_triggered_only = yes
	trigger = {
		has_country_flag = elf_mask_3_granted
	}

	option = {
		name = flavour_maskedbutcher.102.a
		update_magic_study_experience_modifier = { 
			value = 40
		}
		set_country_flag = elf_mask_revoke_track
	}
}

country_event = {
	id = flavour_maskedbutcher.103
	title = flavour_maskedbutcher.103.t
	desc = flavour_maskedbutcher.103.d
	picture = ARTWORK_eventPicture
	hidden = yes
	is_triggered_only = yes
	trigger = {
		has_country_flag = elf_mask_revoke_track
	}

	option = {
		name = flavour_maskedbutcher.103.a
		update_magic_study_experience_modifier = { 
			value = -40
		}
		clr_country_flag = elf_mask_revoke_track
	}
}

country_event = {
	id = flavour_maskedbutcher.104
	title = flavour_maskedbutcher.104.t
	desc = flavour_maskedbutcher.104.d
	picture = ARTWORK_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.104.a
		trigger_switch = {
			on_trigger = has_country_modifier
			racial_focus_centaur = { fire_mask_upgrade_event = { mask_race = centaur race = centaur } }
			racial_focus_dwarven = { fire_mask_upgrade_event = { mask_race = dwarf race = dwarven } }
			racial_focus_elven = { fire_mask_upgrade_event = { mask_race = elf race = elven } }
			racial_focus_gnollish = { fire_mask_upgrade_event = { mask_race = gnoll race = gnollish } }
			racial_focus_gnomish = { fire_mask_upgrade_event = { mask_race = gnome race = gnomish } }
			racial_focus_goblin = { fire_mask_upgrade_event = { mask_race = goblin race = goblin } }
			racial_focus_halfling = { fire_mask_upgrade_event = { mask_race = halfling race = halfling } }
			racial_focus_harimari = { fire_mask_upgrade_event = { mask_race = harimari race = harimari } }
			racial_focus_harpy = { fire_mask_upgrade_event = { mask_race = harpy race = harpy } }
			racial_focus_hobgoblin = { fire_mask_upgrade_event = { mask_race = hobgoblin race = hobgoblin } }
			racial_focus_human = { fire_mask_upgrade_event = { mask_race = human race = human } }
			racial_focus_kobold = { fire_mask_upgrade_event = { mask_race = kobold race = kobold } }
			racial_focus_lizardfolk = { fire_mask_upgrade_event = { mask_race = lizardfolk race = lizardfolk } }
			racial_focus_ogre = { fire_mask_upgrade_event = { mask_race = ogre race = ogre } }
			racial_focus_ruinborn = { fire_mask_upgrade_event = { mask_race = ruinborn race = ruinborn } }
			racial_focus_troll = { fire_mask_upgrade_event = { mask_race = troll race = troll } }
		}
	}

	option = {
		name = flavour_maskedbutcher.104.b
		add_church_power = 100
	}
}

country_event = {
	id = flavour_maskedbutcher.105
	title = flavour_maskedbutcher.105.t
	desc = flavour_maskedbutcher.105.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.105.a
		trigger_switch = {
			on_trigger = has_country_modifier
			racial_focus_centaur = { grant_level_1_mask = { mask_race = centaur } }
			racial_focus_dwarven = { grant_level_1_mask = { mask_race = dwarf } }
			racial_focus_elven = { grant_level_1_mask = { mask_race = elf } }
			racial_focus_gnollish = { grant_level_1_mask = { mask_race = gnoll } }
			racial_focus_gnomish = { grant_level_1_mask = { mask_race = gnome } }
			racial_focus_goblin = { grant_level_1_mask = { mask_race = goblin } }
			racial_focus_halfling = { grant_level_1_mask = { mask_race = halfling } }
			racial_focus_harimari = { grant_level_1_mask = { mask_race = harimari } }
			racial_focus_harpy = { grant_level_1_mask = { mask_race = harpy } }
			racial_focus_hobgoblin = { grant_level_1_mask = { mask_race = hobgoblin } }
			racial_focus_human = { grant_level_1_mask = { mask_race = human } }
			racial_focus_kobold = { grant_level_1_mask = { mask_race = kobold } }
			racial_focus_lizardfolk = { grant_level_1_mask = { mask_race = lizardfolk } }
			racial_focus_ogre = { grant_level_1_mask = { mask_race = ogre } }
			racial_focus_ruinborn = { grant_level_1_mask = { mask_race = ruinborn } }
			racial_focus_troll = { grant_level_1_mask = { mask_race = troll } }
		}
	}
}

country_event = {
	id = flavour_maskedbutcher.106
	title = flavour_maskedbutcher.106.t
	desc = flavour_maskedbutcher.106.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.106.a
		trigger_switch = {
			on_trigger = has_country_modifier
			racial_focus_centaur = { grant_level_2_mask = { mask_race = centaur } }
			racial_focus_dwarven = { grant_level_2_mask = { mask_race = dwarf } }
			racial_focus_elven = { grant_level_2_mask = { mask_race = elf } }
			racial_focus_gnollish = { grant_level_2_mask = { mask_race = gnoll } }
			racial_focus_gnomish = { grant_level_2_mask = { mask_race = gnome } }
			racial_focus_goblin = { grant_level_2_mask = { mask_race = goblin } }
			racial_focus_halfling = { grant_level_2_mask = { mask_race = halfling } }
			racial_focus_harimari = { grant_level_2_mask = { mask_race = harimari } }
			racial_focus_harpy = { grant_level_2_mask = { mask_race = harpy } }
			racial_focus_hobgoblin = { grant_level_2_mask = { mask_race = hobgoblin } }
			racial_focus_human = { grant_level_2_mask = { mask_race = human } }
			racial_focus_kobold = { grant_level_2_mask = { mask_race = kobold } }
			racial_focus_lizardfolk = { grant_level_2_mask = { mask_race = lizardfolk } }
			racial_focus_ogre = { grant_level_2_mask = { mask_race = ogre } }
			racial_focus_ruinborn = { grant_level_2_mask = { mask_race = ruinborn } }
			racial_focus_troll = { grant_level_2_mask = { mask_race = troll } }
		}
	}
}

country_event = {
	id = flavour_maskedbutcher.107
	title = flavour_maskedbutcher.107.t
	desc = flavour_maskedbutcher.107.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.107.a
		trigger_switch = {
			on_trigger = has_country_modifier
			racial_focus_centaur = { grant_level_3_mask = { mask_race = centaur } }
			racial_focus_dwarven = { grant_level_3_mask = { mask_race = dwarf } }
			racial_focus_elven = { grant_level_3_mask = { mask_race = elf } }
			racial_focus_gnollish = { grant_level_3_mask = { mask_race = gnoll } }
			racial_focus_gnomish = { grant_level_3_mask = { mask_race = gnome } }
			racial_focus_goblin = { grant_level_3_mask = { mask_race = goblin } }
			racial_focus_halfling = { grant_level_3_mask = { mask_race = halfling } }
			racial_focus_harimari = { grant_level_3_mask = { mask_race = harimari } }
			racial_focus_harpy = { grant_level_3_mask = { mask_race = harpy } }
			racial_focus_hobgoblin = { grant_level_3_mask = { mask_race = hobgoblin } }
			racial_focus_human = { grant_level_3_mask = { mask_race = human } }
			racial_focus_kobold = { grant_level_3_mask = { mask_race = kobold } }
			racial_focus_lizardfolk = { grant_level_3_mask = { mask_race = lizardfolk } }
			racial_focus_ogre = { grant_level_3_mask = { mask_race = ogre } }
			racial_focus_ruinborn = { grant_level_3_mask = { mask_race = ruinborn } }
			racial_focus_troll = { grant_level_3_mask = { mask_race = troll } }
		}
	}
}

province_event = { 
	id = flavour_maskedbutcher.108
	title = flavour_maskedbutcher.108.t
	desc = flavour_maskedbutcher.108.d
	picture = ARTWORK_eventPicture
	hidden = yes
	is_triggered_only = yes

	after = {
		clr_province_flag = waiting_for_centaur
		clr_province_flag = waiting_for_dwarf
		clr_province_flag = waiting_for_elf
		clr_province_flag = waiting_for_gnoll
		clr_province_flag = waiting_for_gnome
		clr_province_flag = waiting_for_goblin
		clr_province_flag = waiting_for_halfling
		clr_province_flag = waiting_for_harimari
		clr_province_flag = waiting_for_harpy
		clr_province_flag = waiting_for_hobgoblin
		clr_province_flag = waiting_for_human
		clr_province_flag = waiting_for_kobold
		clr_province_flag = waiting_for_lizardfolk
		clr_province_flag = waiting_for_ogre
		clr_province_flag = waiting_for_ruinborn
		clr_province_flag = waiting_for_troll
	}

	option = {
		name = flavour_maskedbutcher.108.a
		trigger_switch = {
			on_trigger = has_province_flag
			waiting_for_centaur = { add_centaur_minority_size_effect = yes }
			waiting_for_dwarf = { add_dwarven_minority_size_effect = yes }
			waiting_for_elf = { add_elven_minority_size_effect = yes }
			waiting_for_gnoll = { add_gnollish_minority_size_effect = yes }
			waiting_for_gnome = { add_gnomish_minority_size_effect = yes }
			waiting_for_goblin = { add_goblin_minority_size_effect = yes }
			waiting_for_halfling = { add_halfling_minority_size_effect = yes }
			waiting_for_harimari = { add_harimari_minority_size_effect = yes }
			waiting_for_harpy = { add_harpy_minority_size_effect = yes }
			waiting_for_hobgoblin = { add_hobgoblin_minority_size_effect = yes }
			waiting_for_human = { add_human_minority_size_effect = yes }
			waiting_for_kobold = { add_kobold_minority_size_effect = yes }
			waiting_for_lizardfolk = { add_lizardfolk_minority_size_effect = yes }
			waiting_for_ogre = { add_ogre_minority_size_effect = yes }
			waiting_for_ruinborn = { add_ruinborn_minority_size_effect = yes }
			waiting_for_troll = { add_troll_minority_size_effect = yes }
		}
	}
}

country_event = {
	id = flavour_maskedbutcher.109
	title = flavour_maskedbutcher.109.t
	desc = flavour_maskedbutcher.109.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes

	after = {
		every_neighbor_country = {
			clr_country_flag = blood_moon_checked_flg
		}
		clr_country_flag = chosen_majorities_flg
		clr_country_flag = chosen_minorities_flg
	}

	option = {
		name = flavour_maskedbutcher.109.a
		set_country_flag = chosen_majorities_flg
		trigger_switch = {
			on_trigger = has_country_modifier
			racial_focus_centaur = { blood_moon_sacrifice_majority = { mask_race = centaur race = centaur } }
			racial_focus_dwarven = { blood_moon_sacrifice_majority = { mask_race = dwarf race = dwarven } }
			racial_focus_elven = { blood_moon_sacrifice_majority = { mask_race = elf race = elven } }
			racial_focus_gnollish = { blood_moon_sacrifice_majority = { mask_race = gnoll race = gnollish } }
			racial_focus_gnomish = { blood_moon_sacrifice_majority = { mask_race = gnome race = gnomish } }
			racial_focus_goblin = { blood_moon_sacrifice_majority = { mask_race = goblin race = goblin } }
			racial_focus_halfling = { blood_moon_sacrifice_majority = { mask_race = halfling race = halfling } }
			racial_focus_harimari = { blood_moon_sacrifice_majority = { mask_race = harimari race = harimari } }
			racial_focus_harpy = { blood_moon_sacrifice_majority = { mask_race = harpy race = harpy } }
			racial_focus_hobgoblin = { blood_moon_sacrifice_majority = { mask_race = hobgoblin race = hobgoblin } }
			racial_focus_human = { blood_moon_sacrifice_majority = { mask_race = human race = human } }
			racial_focus_kobold = { blood_moon_sacrifice_majority = { mask_race = kobold race = kobold } }
			racial_focus_lizardfolk = { blood_moon_sacrifice_majority = { mask_race = lizardfolk race = lizardfolk } }
			racial_focus_ogre = { blood_moon_sacrifice_majority = { mask_race = ogre race = ogre } }
			racial_focus_ruinborn = { blood_moon_sacrifice_majority = { mask_race = ruinborn race = ruinborn } }
			racial_focus_troll = { blood_moon_sacrifice_majority = { mask_race = troll race = troll } }
		}
		if = {
			limit = { mission_completed = H81_maskedbutcher_true_nightfall }
			every_neighbor_country = {
				limit = { capital_scope = { NOT = { continent = serpentspine } } }
				random = {
					chance = 50
					country_event = {
						id = flavour_maskedbutcher.110
					}
				}
				set_country_flag = blood_moon_checked_flg
				every_neighbor_country = {
					limit = { 
						NOT = { has_country_flag = blood_moon_checked_flg }
						capital_scope = { NOT = { continent = serpentspine } }
					}
					random = {
						chance = 50
						country_event = {
							id = flavour_maskedbutcher.110
						}
					}
				}
			}
		}
		else = {
			every_neighbor_country = {
				limit = { capital_scope = { NOT = { continent = serpentspine } } }
				random = {
					chance = 10
					country_event = {
						id = flavour_maskedbutcher.110
					}
				}
				set_country_flag = blood_moon_checked_flg
				every_neighbor_country = {
					limit = { 
						NOT = { has_country_flag = blood_moon_checked_flg }
						capital_scope = { NOT = { continent = serpentspine } }
					}
					random = {
						chance = 10
						country_event = {
							id = flavour_maskedbutcher.110
						}
					}
				}
			}
		}
		add_stability_or_adm_power = yes
	}

	option = {
		name = flavour_maskedbutcher.109.b
		set_country_flag = chosen_minorities_flg
		trigger_switch = {
			on_trigger = has_country_modifier
			racial_focus_centaur = { blood_moon_sacrifice_minority = { mask_race = centaur race = centaur } }
			racial_focus_dwarven = { blood_moon_sacrifice_minority = { mask_race = dwarf race = dwarven } }
			racial_focus_elven = { blood_moon_sacrifice_minority = { mask_race = elf race = elven } }
			racial_focus_gnollish = { blood_moon_sacrifice_minority = { mask_race = gnoll race = gnollish } }
			racial_focus_gnomish = { blood_moon_sacrifice_minority = { mask_race = gnome race = gnomish } }
			racial_focus_goblin = { blood_moon_sacrifice_minority = { mask_race = goblin race = goblin } }
			racial_focus_halfling = { blood_moon_sacrifice_minority = { mask_race = halfling race = halfling } }
			racial_focus_harimari = { blood_moon_sacrifice_minority = { mask_race = harimari race = harimari } }
			racial_focus_harpy = { blood_moon_sacrifice_minority = { mask_race = harpy race = harpy } }
			racial_focus_hobgoblin = { blood_moon_sacrifice_minority = { mask_race = hobgoblin race = hobgoblin } }
			racial_focus_human = { blood_moon_sacrifice_minority = { mask_race = human race = human } }
			racial_focus_kobold = { blood_moon_sacrifice_minority = { mask_race = kobold race = kobold } }
			racial_focus_lizardfolk = { blood_moon_sacrifice_minority = { mask_race = lizardfolk race = lizardfolk } }
			racial_focus_ogre = { blood_moon_sacrifice_minority = { mask_race = ogre race = ogre } }
			racial_focus_ruinborn = { blood_moon_sacrifice_minority = { mask_race = ruinborn race = ruinborn } }
			racial_focus_troll = { blood_moon_sacrifice_minority = { mask_race = troll race = troll } }
		}
		if = {
			limit = { mission_completed = H81_maskedbutcher_true_nightfall }
			every_neighbor_country = {
				limit = { capital_scope = { NOT = { continent = serpentspine } } }
				random = {
					chance = 50
					country_event = {
						id = flavour_maskedbutcher.110
					}
				}
				set_country_flag = blood_moon_checked_flg
				every_neighbor_country = {
					limit = { 
						NOT = { has_country_flag = blood_moon_checked_flg }
						capital_scope = { NOT = { continent = serpentspine } }
					}
					random = {
						chance = 50
						country_event = {
							id = flavour_maskedbutcher.110
						}
					}
				}
			}
		}
		else = {
			every_neighbor_country = {
				limit = { capital_scope = { NOT = { continent = serpentspine } } }
				random = {
					chance = 10
					country_event = {
						id = flavour_maskedbutcher.110
					}
				}
				set_country_flag = blood_moon_checked_flg
				every_neighbor_country = {
					limit = { 
						NOT = { has_country_flag = blood_moon_checked_flg }
						capital_scope = { NOT = { continent = serpentspine } }
					}
					random = {
						chance = 10
						country_event = {
							id = flavour_maskedbutcher.110
						}
					}
				}
			}
		}
		add_stability_or_adm_power = yes
	}
}

country_event = {
	id = flavour_maskedbutcher.110
	title = flavour_maskedbutcher.110.t
	desc = flavour_maskedbutcher.110.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.110.a
		add_stability = -1
	}
}

country_event = {
	id = flavour_maskedbutcher.111
	title = flavour_maskedbutcher.111.t
	desc = flavour_maskedbutcher.111.d
	picture = ARTWORK_eventPicture
	hidden = yes
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.111.a
		if = {
			limit = { event_target:oblations_loser = { culture_is_centaur = yes } }
			add_oblations = { race = centaur }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_dwarven = yes } }
			add_oblations = { race = dwarven }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_elven = yes } }
			add_oblations = { race = elven }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_gnollish = yes } }
			add_oblations = { race = gnollish }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_gnomish = yes } }
			add_oblations = { race = gnomish }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_goblin = yes } }
			add_oblations = { race = goblin }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_halfling = yes } }
			add_oblations = { race = halfling }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_harimari = yes } }
			add_oblations = { race = harimari }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_harpy = yes } }
			add_oblations = { race = harpy }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_hobgoblin = yes } }
			add_oblations = { race = hobgoblin }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_human = yes } }
			add_oblations = { race = human }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_kobold = yes } }
			add_oblations = { race = kobold }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_lizardfolk = yes } }
			add_oblations = { race = lizardfolk }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_ogre = yes } }
			add_oblations = { race = ogre }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_ruinborn = yes } }
			add_oblations = { race = ruinborn }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_troll = yes } }
			add_oblations = { race = troll }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_half_elven = yes } }
			add_oblations = { race = half_elven }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_half_orcish = yes } }
			add_oblations = { race = half_orcish }
		}
		else = {
			add_oblations = { race = orcish }
		}
	}
}