namespace = flavor_averilibet

#harem event, mostly copy of dakinshi
country_event = {
	id = flavor_averilibet.1
	title = flavor_averilibet.1.1.t
	picture = 3_SONS_eventPicture
	
	is_triggered_only = yes

	trigger = {
		has_dlc = "Rights of Man"
		ruler_age = 30
		has_heir = no
		has_government_attribute = heir
		has_reform = ngwenamasonamingo
	}
	
	desc = {
		trigger = { is_female = yes }
		desc = dakinshi_harem_events.1.fem
	}

	immediate = {
		hidden_effect = {
			random_list = {
				40 = { set_country_flag = harem_fairest_heir }
				40 = { set_country_flag = harem_strong_heir }
				25 = { set_country_flag = harem_mongoose_heir }
				15 = { set_country_flag = harem_mongoose_good_heir }
				10 = { set_country_flag = harem_mongoose_genius_heir }
			}
			random_list = {
				40 = { set_country_flag = harem_generous_heir }
				40 = { set_country_flag = harem_studious_heir }
				25 = { set_country_flag = harem_elephant_heir }
                15 = { set_country_flag = harem_elephant_good_heir }
				10 = { set_country_flag = harem_elephant_genius_heir }
			}
			random_list = {
				40 = { set_country_flag = harem_inquisitive_heir }
				40 = { set_country_flag = harem_gregarious_heir }
				25 = { set_country_flag = harem_leopard_heir }
                15 = { set_country_flag = harem_leopard_good_heir }
				10 = { set_country_flag = harem_leopard_genius_heir }
			}
		}
	}

	#first choice
	option = {	 
		name = dakinshi_harem_events.1.a
		trigger = { has_country_flag = harem_fairest_heir }
		define_heir = {
			female = yes
			dynasty = original_dynasty
			age = 10
		}
	}
	option = {	 
		name = dakinshi_harem_events.1.b
		trigger = { has_country_flag = harem_strong_heir }
		define_heir = {
			female = yes
			dynasty = original_dynasty
			change_mil = 1
			max_random_dip = 5
			age = 10
		}
	}
	option = {	 
		name = dakinshi_harem_events.1.c
		trigger = { has_country_flag = harem_mongoose_heir }
		define_heir = {
			female = yes
			dynasty = original_dynasty
			age = 10
		}
		add_heir_personality = mongoose_shifter_personality
	}
	option = {	 
		name = dakinshi_harem_events.1.d
		trigger = { has_country_flag = harem_mongoose_good_heir }
		define_heir = {
			female = yes
			dynasty = original_dynasty
			change_mil = 1
			age = 10
		}
		add_heir_personality = mongoose_shifter_personality
	}
	option = {	 
		name = dakinshi_harem_events.1.e
		trigger = { has_country_flag = harem_mongoose_genius_heir }
		define_heir = {
			female = yes
			dynasty = original_dynasty
			change_adm = 1
			change_dip = 1
			change_mil = 2
			age = 10
		}
		add_heir_personality = mongoose_shifter_personality
	}

	#second choice
	option = {	 
		name = dakinshi_harem_events.1.f
		trigger = { has_country_flag = harem_generous_heir }
		define_heir = {
			female = yes
			dynasty = original_dynasty
			age = 10
		}
	}
	option = {	 
		name = dakinshi_harem_events.1.g
		trigger = { has_country_flag = harem_studious_heir }
		define_heir = {
			female = yes
			dynasty = original_dynasty
			change_adm = 1
			max_random_mil = 5
			age = 10
		}
	}
	option = {	 
		name = dakinshi_harem_events.1.h
		trigger = { has_country_flag = harem_elephant_heir }
		define_heir = {
			female = yes
			dynasty = original_dynasty
			age = 10
		}
		add_heir_personality = elephant_shifter_personality
	}
	option = {
		name = dakinshi_harem_events.1.i
		trigger = { has_country_flag = harem_elephant_good_heir }
		define_heir = {
			female = yes
			dynasty = original_dynasty
			change_adm = 1
			max_random_mil = 5
			age = 10
		}
		add_heir_personality = elephant_shifter_personality
	}
	option = {	 
		name = dakinshi_harem_events.1.j
		trigger = { has_country_flag = harem_elephant_genius_heir }
		define_heir = {
			female = yes
			dynasty = original_dynasty
			change_adm = 1
			change_dip = 1
			change_mil = 1
			age = 10
		}
		add_heir_personality = elephant_shifter_personality
	}



	#third choice
	option = {	 
		name = dakinshi_harem_events.1.k
		trigger = { has_country_flag = harem_inquisitive_heir }
		define_heir = {
			female = yes
			dynasty = original_dynasty
			age = 10
		}
	}
	option = {	 
		name = dakinshi_harem_events.1.l
		trigger = { has_country_flag = harem_gregarious_heir }
		define_heir = {
			female = yes
			dynasty = original_dynasty
			dip = 1
			max_random_mil = 5
			age = 10
		}
	}
	option = {	 
		name = dakinshi_harem_events.1.m
		trigger = { has_country_flag = harem_leopard_heir }
		define_heir = {
			female = yes
			dynasty = original_dynasty
			age = 10
		}
		add_heir_personality = leopard_shifter_personality
	}
	option = {	 
		name = dakinshi_harem_events.1.n
		trigger = { has_country_flag = harem_leopard_good_heir }
		define_heir = {
			female = yes
			dynasty = original_dynasty
			change_dip = 1
			max_random_adm = 5
			age = 10
		}
		add_heir_personality = leopard_shifter_personality
	}
	option = {	 
		name = dakinshi_harem_events.1.o
		trigger = { has_country_flag = harem_leopard_genius_heir }
		define_heir = {
			female = yes
			dynasty = original_dynasty
			change_adm = 1
			change_dip = 1
			change_mil = 1
			age = 10
		}
		add_heir_personality = leopard_shifter_personality
	}

	after = {
		clr_country_flag = harem_fairest_heir
		clr_country_flag = harem_strong_heir
		clr_country_flag = harem_mongoose_heir
		clr_country_flag = harem_mongoose_good_heir
		clr_country_flag = harem_mongoose_genius_heir

		clr_country_flag = harem_generous_heir
		clr_country_flag = harem_studious_heir
		clr_country_flag = harem_elephant_heir
		clr_country_flag = harem_elephant_good_heir
		clr_country_flag = harem_elephant_genius_heir

		clr_country_flag = harem_inquisitive_heir
		clr_country_flag = harem_gregarious_heir
		clr_country_flag = harem_leopard_heir
		clr_country_flag = harem_leopard_good_heir
		clr_country_flag = harem_leopard_genius_heir
	}
}

#ruler with no heir death event
country_event = {
	id = flavor_averilibet.2
	title = flavor_averilibet.2.t
	desc = flavor_averilibet.2.desc
	picture = SWORD_OF_OSMAN_eventPicture

	is_triggered_only = yes

	trigger = {
        has_reform = ngwenamasonamingo
	}

	immediate = {
		hidden_effect = {
			define_ruler = {
				dynasty = original_dynasty
				female = yes
				age = 25
			}
		}
	}

	option = {
		name = flavor_averilibet.2.a
		custom_tooltip = flavor_averilibet.2.a.tt
	}
}

#husband_harem
country_event = {
	id = flavor_averilibet.3
	title = flavor_averilibet.3.t
	desc = flavor_averilibet.3.desc
	picture = ROYAL_COUPLE_FUTURE_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_reform = ngwenamasonamingo
	}
	
	immediate = {
		hidden_effect = {
			S83 = { save_event_target_as = event_target:lizardfolk_hus_origin }
			set_saved_name = {
				key = lizardfolk_name
				type = advisor 
				scope = event_target:lizardfolk_hus_origin
			}
			L62 = { save_event_target_as = event_target:harimari_hus_origin }
			set_saved_name = {
				key = harimari_name
				type = advisor 
				scope = event_target:harimari_hus_origin
			}
			S54 = { save_event_target_as = event_target:mengi_hus_origin }
			set_saved_name = {
				key = mengi_name
				type = advisor 
				scope = event_target:mengi_hus_origin
			}
			S43 = { save_event_target_as = event_target:tanizu_hus_origin }
			set_saved_name = {
				key = tanizu_name
				type = advisor
				scope = event_target:tanizu_hus_origin 
			}
			F72 = { save_event_target_as = event_target:gnollish_hus_origin }
			set_saved_name = {
				key = gnollish_name
				type = advisor
				scope = event_target:gnollish_hus_origin 
			}
			L55 = { save_event_target_as = event_target:harpy_hus_origin }
			set_saved_name = {
				key = harpy_name
				type = advisor
				scope = event_target:harpy_hus_origin
			}
		}
	}
	
	option = {		
		name = flavor_averilibet.3.a
		add_country_modifier = {
			name = S53_military_husband_lvl1
			duration = -1
		}
		hidden_effect = {
			random_list = {
				4 = {
					define_consort = {
						name = lizardfolk_name
						religion = beast_memory
						culture = cyazizeta_lizardfolk
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = lizardfolk_name 
						tradition = 100
						add_shock = 1
						female = no
					}
					
				}
				14 = {
					define_consort = {
						name = tanizu_name
						religion = beast_memory
						culture = tanizu
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = tanizu_name
						tradition = 100
						add_shock = 1
						female = no
					}
				}
				14 = {
					define_consort = {
						name = mengi_name
						religion = ROOT
						culture = talilibeti
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = mengi_name
						tradition = 100
						add_manuever = 1
						female = no
					}
				}
				14 = {
					define_consort = {
						name = mengi_name
						religion = ROOT
						culture = sitewosi
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = mengi_name
						tradition = 100
						add_manuever = 1
						female = no
					}
				}
				14 = {
					define_consort = {
						name = mengi_name
						religion = ROOT
						culture = yeteferen
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = mengi_name
						tradition = 100
						add_fire = 1
						female = no
					}
				}
				14 = {
					define_consort = {
						name = mengi_name
						religion = ROOT
						culture = metobesebi
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = mengi_name
						tradition = 100
						add_siege = 1
						female = no
					}
				}
				14 = {
					define_consort = {
						name = mengi_name
						religion = ROOT
						culture = ofehibi
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = mengi_name
						tradition = 100
						add_fire = 1
						female = no
					}
				}
				4 = {
					define_consort = {
						name = gnollish_name
						religion = ROOT
						culture = fieldstalker_gnoll
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = gnollish_name
						tradition = 100
						add_shock = 1
						female = no
					}
				}
				4 = {
					define_consort = {
						name = harpy_name
						religion = ROOT
						culture = naleni_harpy
						female = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = harpy_name
						tradition = 100
						add_siege = 1
						female = yes
					}
				}
				4 = {
					define_consort = {
						name = harimari_name
						religion = high_philosophy
						culture = roaming_harimari
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = harimari_name
						tradition = 100
						add_shock = 1
						female = no
					}
				}
			}
			remove_country_modifier = S53_military_husband_lvl2
			remove_country_modifier = S53_military_husband_lvl3
			remove_country_modifier = S53_diplomatic_husband_lvl1
			remove_country_modifier = S53_diplomatic_husband_lvl2
			remove_country_modifier = S53_diplomatic_husband_lvl3
			remove_country_modifier = S53_administrative_husband_lvl1
			remove_country_modifier = S53_administrative_husband_lvl2
			remove_country_modifier = S53_administrative_husband_lvl3
			set_consort_flag = S53_leopardhusband
		}
	}

	option = {		
		name = flavor_averilibet.3.b
		add_country_modifier = {
			name = S53_diplomatic_husband_lvl1
			duration = -1
		}
		hidden_effect = {
			random_list = {
				4 = {
					define_consort = {
						name = lizardfolk_name
						religion = beast_memory
						culture = cyazizeta_lizardfolk
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = lizardfolk_name 
						tradition = 100
						add_shock = 1
						female = no
					}
					
				}
				14 = {
					define_consort = {
						name = tanizu_name
						religion = beast_memory
						culture = tanizu
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = tanizu_name
						tradition = 100
						add_shock = 1
						female = no
					}
				}
				14 = {
					define_consort = {
						name = mengi_name
						religion = ROOT
						culture = talilibeti
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = mengi_name
						tradition = 100
						add_manuever = 1
						female = no
					}
				}
				14 = {
					define_consort = {
						name = mengi_name
						religion = ROOT
						culture = sitewosi
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = mengi_name
						tradition = 100
						add_manuever = 1
						female = no
					}
				}
				14 = {
					define_consort = {
						name = mengi_name
						religion = ROOT
						culture = yeteferen
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = mengi_name
						tradition = 100
						add_fire = 1
						female = no
					}
				}
				14 = {
					define_consort = {
						name = mengi_name
						religion = ROOT
						culture = metobesebi
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = mengi_name
						tradition = 100
						add_siege = 1
						female = no
					}
				}
				14 = {
					define_consort = {
						name = mengi_name
						religion = ROOT
						culture = ofehibi
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = mengi_name
						tradition = 100
						add_fire = 1
						female = no
					}
				}
				4 = {
					define_consort = {
						name = gnollish_name
						religion = ROOT
						culture = fieldstalker_gnoll
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = gnollish_name
						tradition = 100
						add_shock = 1
						female = no
					}
				}
				4 = {
					define_consort = {
						name = harpy_name
						religion = ROOT
						culture = naleni_harpy
						female = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = harpy_name
						tradition = 100
						add_siege = 1
						female = yes
					}
				}
				4 = {
					define_consort = {
						name = harimari_name
						religion = high_philosophy
						culture = roaming_harimari
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = harimari_name
						tradition = 100
						add_shock = 1
						female = no
					}
				}
			}
			remove_country_modifier = S53_military_husband_lvl2
			remove_country_modifier = S53_military_husband_lvl3
			remove_country_modifier = S53_military_husband_lvl1
			remove_country_modifier = S53_diplomatic_husband_lvl2
			remove_country_modifier = S53_diplomatic_husband_lvl3
			remove_country_modifier = S53_administrative_husband_lvl1
			remove_country_modifier = S53_administrative_husband_lvl2
			remove_country_modifier = S53_administrative_husband_lvl3
			set_consort_flag = S53_leopardhusband
		}
	}

	option = {		
		name = flavor_averilibet.3.c
		add_country_modifier = {
			name = S53_administrative_husband_lvl1
			duration = -1
		}
		hidden_effect = {
			random_list = {
				4 = {
					define_consort = {
						name = lizardfolk_name
						religion = beast_memory
						culture = cyazizeta_lizardfolk
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = lizardfolk_name 
						tradition = 100
						add_shock = 1
						female = no
					}
					
				}
				14 = {
					define_consort = {
						name = tanizu_name
						religion = beast_memory
						culture = tanizu
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = tanizu_name
						tradition = 100
						add_shock = 1
						female = no
					}
				}
				14 = {
					define_consort = {
						name = mengi_name
						religion = ROOT
						culture = talilibeti
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = mengi_name
						tradition = 100
						add_manuever = 1
						female = no
					}
				}
				14 = {
					define_consort = {
						name = mengi_name
						religion = ROOT
						culture = sitewosi
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = mengi_name
						tradition = 100
						add_manuever = 1
						female = no
					}
				}
				14 = {
					define_consort = {
						name = mengi_name
						religion = ROOT
						culture = yeteferen
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = mengi_name
						tradition = 100
						add_fire = 1
						female = no
					}
				}
				14 = {
					define_consort = {
						name = mengi_name
						religion = ROOT
						culture = metobesebi
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = mengi_name
						tradition = 100
						add_siege = 1
						female = no
					}
				}
				14 = {
					define_consort = {
						name = mengi_name
						religion = ROOT
						culture = ofehibi
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = mengi_name
						tradition = 100
						add_fire = 1
						female = no
					}
				}
				4 = {
					define_consort = {
						name = gnollish_name
						religion = ROOT
						culture = fieldstalker_gnoll
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = gnollish_name
						tradition = 100
						add_shock = 1
						female = no
					}
				}
				4 = {
					define_consort = {
						name = harpy_name
						religion = ROOT
						culture = naleni_harpy
						female = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = harpy_name
						tradition = 100
						add_siege = 1
						female = yes
					}
				}
				4 = {
					define_consort = {
						name = harimari_name
						religion = high_philosophy
						culture = roaming_harimari
						male = yes
						dynasty = "Of The Harem"
					}
					create_general = {
						name = harimari_name
						tradition = 100
						add_shock = 1
						female = no
					}
				}
			}
			remove_country_modifier = S53_military_husband_lvl2
			remove_country_modifier = S53_military_husband_lvl3
			remove_country_modifier = S53_diplomatic_husband_lvl1
			remove_country_modifier = S53_diplomatic_husband_lvl2
			remove_country_modifier = S53_diplomatic_husband_lvl3
			remove_country_modifier = S53_military_husband_lvl1
			remove_country_modifier = S53_administrative_husband_lvl2
			remove_country_modifier = S53_administrative_husband_lvl3
			set_consort_flag = S53_leopardhusband
		}
	}

	option = {
		name = flavor_averilibet.3.d
		trigger = {
			has_consort_flag = S53_leopardhusband
		}
		add_legitimacy = -15
		hidden_effect = {
			if = {
				limit = { has_country_modifier = S53_military_husband_lvl1}
				add_country_modifier = {
					name = S53_military_husband_lvl2				
					duration = -1
				}
				remove_country_modifier = S53_military_husband_lvl1
			}
			else_if = {
				limit = { has_country_modifier = S53_military_husband_lvl2 }
				add_country_modifier = {
					name = S53_military_husband_lvl3				
					duration = -1
				}
				remove_country_modifier = S53_military_husband_lvl2
			}
			else_if = {
				limit = { has_country_modifier = S53_diplomatic_husband_lvl1 }
				add_country_modifier = {
					name = S53_diplomatic_husband_lvl2		
					duration = -1
				}
				remove_country_modifier = S53_diplomatic_husband_lvl1 
			}
			else_if = {
				limit = {  has_country_modifier = S53_diplomatic_husband_lvl2 }
				add_country_modifier = {
					name = S53_diplomatic_husband_lvl3		
					duration = -1
				}
				remove_country_modifier = S53_diplomatic_husband_lvl2
			}
			else_if = {
				limit = { has_country_modifier = S53_administrative_husband_lvl1 }
				add_country_modifier = {
					name = S53_administrative_husband_lvl2	
					duration = -1
				}
				remove_country_modifier = S53_administrative_husband_lvl1
			}
			else_if = {
				limit = { has_country_modifier = S53_administrative_husband_lvl2 }
				add_country_modifier = {
					name = S53_administrative_husband_lvl3	
					duration = -1
				}
				remove_country_modifier = S53_administrative_husband_lvl2
			}
		}
	}
	
	after = {
		clear_saved_name = lizardfolk_name
		clear_saved_name = mengi_name
		clear_saved_name = tanizu_name
		clear_saved_name = harimari_name
		clear_saved_name = gnollish_name
		country_event = {
			id = flavor_averilibet.3
			days = 3650
		}
	}
}

#a special guest / breach of tradtions event
country_event = {
	id = flavor_averilibet.4
	title = flavor_averilibet.4.t
	desc = flavor_averilibet.4.desc
	picture = SWORD_OF_OSMAN_eventPicture

	is_triggered_only = yes

	option = {
		name = flavor_averilibet.4.a
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -20 
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -20
		}
		add_ruler_personality = reformist_personality
		add_country_modifier = {
			name = S53_futher_understaning
			duration = 5475
		}
	}
}

#children of beast religious action
country_event = {
	id = flavor_averilibet.5
	title = flavor_averilibet.5.t
	desc = flavor_averilibet.5.desc

	is_triggered_only = yes

	immediate = {
		add_country_modifier = {
			name = S53_children_of_beasts_roads_and_waterways
			duration = 3650
		}
	}

	option = {
		name = flavor_averilibet.5.a
		random_owned_area = {
			limit = { is_core = ROOT }
			add_province_modifier = {
				name = S53_children_of_beasts_roads_and_waterways
				duration = 1825
			}
		}
	}

	option = {
		name = flavor_averilibet.5.a
		random_owned_area = {
			limit = { is_core = ROOT }
			add_province_modifier = {
				name = S53_children_of_beasts_roads_and_waterways
				duration = 1825
			}
		}
	}

	option = {
		name = flavor_averilibet.5.a
		random_owned_area = {
			limit = { is_core = ROOT }
			add_province_modifier = {
				name = S53_children_of_beasts_roads_and_waterways
				duration = 1825
			}
		}
	}
}