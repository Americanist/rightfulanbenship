
# Giberd MT events
# 1-9: old events
# 10-50: reworked giberd MT events

namespace = flavor_giberd

#Nimscodd Aid
country_event = {
	id = flavor_giberd.1
	title = flavor_giberd.1.t
	desc = flavor_giberd.1.d
	picture = GREAT_BUILDING_eventPicture
	
	is_triggered_only = yes
	
	option = {		
		name = flavor_giberd.1.a
		
		add_treasury = 100
		add_country_modifier = {
			name = giberd_aid_from_giberd
			duration = 7300 #20 years
		}
	}
}

#Gnomish Elector
country_event = {
	id = flavor_giberd.2
	title = flavor_giberd.2.t
	desc = flavor_giberd.2.d
	picture = HRE_eventPicture
	
	is_triggered_only = yes
	
	option = {		
		name = flavor_giberd.2.a
		ai_chance = {
			factor = 100
		}
		
		add_imperial_influence = 10
		add_country_modifier = {
			name = giberd_gnomish_elector_mod
			duration = -1
		}
		A81 = { #Giberd
			if = {
				limit = {
					ai = yes
				}
				add_opinion = {
					who = ROOT
					modifier = grant_electorate
				}
			}
			elector = yes
			set_country_flag = gnomish_elector
			country_event = { id = flavor_giberd.3 }
		}
	}
	
	option = {		
		name = flavor_giberd.2.b
		ai_chance = {
			factor = 0
		}
		
		add_imperial_influence = -5
		A81 = { #Giberd
			if = {
				limit = {
					ai = yes
				}
				add_opinion = {
					who = ROOT
					modifier = giberd_refused_electorate
				}
			}
			country_event = { id = flavor_giberd.3 }
		}
	}
}

#Gnomish Elector accepted
country_event = {
	id = flavor_giberd.3
	title = flavor_giberd.3.t
	desc = flavor_giberd.3.d
	picture = HRE_eventPicture
	
	is_triggered_only = yes
	
	option = {		
		name = flavor_giberd.3.a
		
		add_prestige = 10
		tooltip = {
			elector = yes
		}
	}
}

#Gnomish Elector refused
country_event = {
	id = flavor_giberd.4
	title = flavor_giberd.4.t
	desc = flavor_giberd.4.d
	picture = HRE_eventPicture
	
	is_triggered_only = yes
	
	option = {		
		name = flavor_giberd.4.a
		
		add_prestige = -10
	}
}

# Reworked Giberd MT events

#Our Options of War
country_event = {
	id = flavor_giberd.10
	title = flavor_giberd.10.t
	desc = flavor_giberd.10.d
	
	is_triggered_only = yes

	immediate = {
		# TODO: implement research speed / inability to research
		hidden_effect = {
			#Artificery Local Setup
			set_country_flag = artificery_unlocked #failsave

			#Give welcome basket of three inventions if not yet received.
			artifice_inventions_give_basket = yes
			update_artifice_points = yes
			clear_artificers_organization_effect = yes
			set_estate_privilege = estate_artificers_organization_giberd_magisterium_oversight
			bennonhill_area = {
				add_permanent_claim = ROOT
			}
			hearthswood_area = {
				add_permanent_claim = ROOT
			}
		}
	}

	option = {
		name = flavor_giberd.10.a
		goto = 273 #Tendergrove
		add_country_modifier = {
			name = giberd_options_war_leslinpar
			duration = 3560
		}
		add_treasury = -50
		capital_scope = {
			kill_units = {
				who = owner
				type = infantry
				amount = 2
			}
			rajput_infantry = A81
			rajput_infantry = A81
		}
		custom_tooltip = giberd_unable_to_research_10
		custom_tooltip = giberd_ae_gnomish_minority_tt
		custom_tooltip = giberd_magisterium_oversight_tt

		custom_tooltip = has_already_happened_tt
		tooltip = {
			bennonhill_area = {
				add_permanent_claim = ROOT
			}
			hearthswood_area = {
				add_permanent_claim = ROOT
			}
		}
		set_estate_privilege = estate_artificers_organization_giberd_magisterium_oversight

	}

	option = {
		name = flavor_giberd.10.b
		goto = 268 #Bennon
		custom_tooltip = giberd_bennon_forts_explode_tt
		tooltip = {
			268 = {
				add_province_modifier = {
					name = giberd_options_war_bennon
					duration = 1825
				}
			}
		}
		add_treasury = -50
		capital_scope = {
			kill_units = {
				who = owner
				type = infantry
				amount = 2
			}
			rajput_infantry = A81
			rajput_infantry = A81
		}
		custom_tooltip = giberd_unable_to_research_10 # TODO: Implement
		custom_tooltip = giberd_ae_gnomish_minority_tt
		custom_tooltip = giberd_magisterium_oversight_tt

		custom_tooltip = has_already_happened_tt
		tooltip = {
			bennonhill_area = {
				add_permanent_claim = ROOT
			}
			hearthswood_area = {
				add_permanent_claim = ROOT
			}
		}
		set_estate_privilege = estate_artificers_organization_giberd_magisterium_oversight
	}
	option = {
		name = flavor_giberd.10.c
		add_prestige = 20
		custom_tooltip = giberd_research_speed_tt # TODO: Implement
		custom_tooltip = giberd_ae_gnomish_minority_tt # TODO: Implement
		custom_tooltip = giberd_magisterium_oversight_tt

		custom_tooltip = has_already_happened_tt
		tooltip = {
			bennonhill_area = {
				add_permanent_claim = ROOT
			}
			hearthswood_area = {
				add_permanent_claim = ROOT
			}
		}
		set_estate_privilege = estate_artificers_organization_giberd_magisterium_oversight
	}

}