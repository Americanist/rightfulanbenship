
konolkhatep_rule_pack_effect = {
	if = {
		limit = { exists = $tag$ NOT = { $tag$ = { is_subject_of_type = medasi_subject } } }
		$tag$ = { 
			kill_ruler = yes 
			hidden_effect = { grant_independence = yes }
		}
		create_subject = {
			subject_type = personal_union
			who = $tag$
		}	
	}
	else = {
		release = $tag$
		create_subject = {
			subject_type = personal_union
			who = $tag$
		}
	}
	$tag$ = {
		add_liberty_desire = -50
		add_opinion = { who = ROOT modifier = opinion_loyal_pack }
	}
}














####Disaster
konolkhatep_disaster_counter_effect = {
	hidden_effect = {
		change_variable = { gnoll_disaster_counter = 1 }
		if = {
			limit = { is_variable_equal = { which = gnoll_disaster_counter value = 4 } }
			country_event = { id = flavor_konolkhatep.50 days = 60 }
		}
		if = {
			limit = { is_variable_equal = { which = gnoll_disaster_counter value = 7 } }
			country_event = { id = flavor_konolkhatep.51 days = 60 }
		}
		if = {
			limit = { is_variable_equal = { which = gnoll_disaster_counter value = 10 } }
			country_event = { id = flavor_konolkhatep.52 days = 60 }
		}
	}
}


konolkhatep_spawn_zinhakan_reinforcements = {
	custom_tooltip = konolkhatep_spawn_zinhakan_reinforcements_tooltip
	hidden_effect = {
		F67 = { 
			infantry = PREV
			infantry = PREV
			infantry = PREV
			infantry = PREV
			infantry = PREV
			infantry = PREV
			infantry = PREV
			infantry = PREV
			infantry = PREV
			infantry = PREV
			infantry = PREV
			infantry = PREV #12

			cavalry = PREV
			cavalry = PREV
			cavalry = PREV
			cavalry = PREV #4

			artillery = PREV
			artillery = PREV
			artillery = PREV
			artillery = PREV
			artillery = PREV
			artillery = PREV
			artillery = PREV #7
		}
	}
}


konolkhatep_culture_revolt_provinces_effect = {
	custom_tooltip = konolkhatep_culture_revolt_provinces_effect_tooltip
	hidden_effect = {
		every_owned_province = {
			limit = { culture = $culture$ }
			random_list = {
				#loyal
				50 = {
					modifier = {
						factor = 1.5
						religion_group = khetist
					}
					modifier = {
						factor = 1.25
						NOT = { local_autonomy = 25 }
					}
		
					modifier = {
						factor = 0.75
						local_autonomy = 25
					}
					modifier = {
						factor = 0.75
						unrest = 5
					}
					modifier = {
						factor = 0.5
						devastation = 50
					}
				}
		
		
				#rebel
				50 = {
					add_core = F67
					cede_province = F67
				}
			}
		}
	}
}

konolkhatep_culture_revolt_tag_effect = {
	custom_tooltip = konolkhatep_culture_revolt_tag_effect_tooltip
	hidden_effect = {
		random_list = {
			#loyal
			65 = {
				modifier = {
					factor = 1.1
					has_opinion = { who = F66 value = 100 }
				}
				modifier = {
					factor = 1.2
					has_opinion = { who = F66 value = 150 }
				}
				modifier = {
					factor = 1.25
					NOT = { liberty_desire = 10 }
				}
				modifier = {
					factor = 1.25
					religious_unity = 1
				}
	
				modifier = {
					factor = 0.9
					liberty_desire = 10
				}
				modifier = {
					factor = 0.9
					liberty_desire = 25
				}
				modifier = {
					factor = 0.75
					liberty_desire = 50
				}
				modifier = {
					factor = 0.75
					liberty_desire = 75
				}
				modifier = {
					factor = 0.75
					liberty_desire = 100
				}
				modifier = {
					factor = 0.9
					num_of_owned_provinces_with = {
						value = 5
						NOT = { religion_group = khetist }
					}
				}
				modifier = {
					factor = 0.9
					num_of_owned_provinces_with = {
						value = 10
						NOT = { religion_group = khetist }
					}
				}
				modifier = {
					factor = 0.9
					num_of_owned_provinces_with = {
						value = 15
						NOT = { religion_group = khetist }
					}
				}
				modifier = {
					factor = 0.8
					num_of_owned_provinces_with = {
						value = 5
						culture_group = gnollish
						NOT = { culture = sorrowmane_gnoll }
					}
				}
				modifier = {
					factor = 0.8
					num_of_owned_provinces_with = {
						value = 10
						culture_group = gnollish
						NOT = { culture = sorrowmane_gnoll }
					}
				}
			}
	
	
			#rebel
			35 = { F67 = { inherit = PREV } }
		}
	}
}